{"ast":null,"code":"var _jsxFileName = \"/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/server/client/src/components/products/components/ReviewForm.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { Formik, Form } from 'formik';\nimport * as Yup from 'yup';\nimport FormikTextField from '../../shared/formElements/FormikTextField';\nimport PageHeading from '../../shared/ui/PageHeading';\nimport { createProductReview } from '../../../redux/actionCreators/reviewActionCreators';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport Button from '@material-ui/core/Button';\nimport Rating from '@material-ui/lab/Rating';\nimport Typography from '@material-ui/core/Typography';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  root: {\n    maxWidth: '600px',\n    margin: '10px 0px 70px 20px',\n    textAlign: 'left'\n  },\n  ratingBox: {\n    minHeight: '40px',\n    display: 'flex',\n    alignItems: 'center',\n    margin: 0,\n    padding: 0\n  },\n  btn: {\n    padding: '12px',\n    width: '90px',\n    backgroundColor: theme.palette.primary.dark,\n    fontSize: '14px',\n    fontWeight: '700',\n    borderRadius: '0px',\n    color: '#fff',\n    '&:hover': {\n      backgroundColor: theme.palette.primary.main\n    }\n  }\n}));\nconst ratingLabels = {\n  1: 'Useless',\n  2: 'Poor',\n  3: 'Ok',\n  4: 'Good',\n  5: 'Excellent'\n};\n\nconst ReviewForm = ({\n  loggedInUser,\n  product,\n  review,\n  refreshReviews\n}) => {\n  _s();\n\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const [hover, setHover] = useState(-1);\n  const initialValues = {\n    rating: (review === null || review === void 0 ? void 0 : review.rating) || 0,\n    comment: (review === null || review === void 0 ? void 0 : review.comment) || ''\n  };\n  const validationSchema = Yup.object({\n    rating: Yup.number('Must be a number').required('Price required').positive('Must be positive').oneOf([...Array(5).keys()].map(num => num + 1)),\n    comment: Yup.string().notRequired()\n  });\n\n  const onSuccess = () => {\n    refreshReviews();\n  };\n\n  const submitHandler = async (values, actions) => {\n    var _values$comment;\n\n    const reviewInfo = {\n      rating: Number(values.rating),\n      comment: (_values$comment = values.comment) === null || _values$comment === void 0 ? void 0 : _values$comment.trim()\n    };\n    dispatch(createProductReview(product.id, loggedInUser === null || loggedInUser === void 0 ? void 0 : loggedInUser.token, reviewInfo, onSuccess));\n    actions.setSubmitting(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(PageHeading, {\n      text: \"Rate or post a review\",\n      size: \"medium\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Paper, {\n      className: classes.root,\n      elevation: 0,\n      children: /*#__PURE__*/_jsxDEV(Formik, {\n        initialValues: initialValues,\n        validationSchema: validationSchema,\n        onSubmit: submitHandler,\n        validateOnMount: true,\n        enableReinitialize: true,\n        children: formik => /*#__PURE__*/_jsxDEV(Form, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.ratingBox,\n            children: [/*#__PURE__*/_jsxDEV(Rating, {\n              name: \"rating\",\n              label: \"Leave a rating\",\n              value: formik.values.rating || formik.initialValues.rating,\n              onChange: event => {\n                const val = Number(event.target.value);\n                formik.setFieldValue('rating', val);\n              },\n              onChangeActive: (event, newHover) => {\n                setHover(newHover);\n              },\n              precision: 1.0\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 17\n            }, this), formik.values.rating !== null && /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"caption\",\n              color: \"textSecondary\",\n              style: {\n                marginLeft: '10px',\n                lineHeight: '2rem'\n              },\n              children: /*#__PURE__*/_jsxDEV(\"em\", {\n                children: ratingLabels[hover !== -1 ? hover : formik.values.rating]\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 118,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.formControl,\n            children: /*#__PURE__*/_jsxDEV(FormikTextField, {\n              fieldName: \"comment\",\n              type: \"text\",\n              label: \"Leave a comment\",\n              as: \"textarea\",\n              variant: \"outlined\",\n              maxLength: 1000,\n              multiline: true,\n              rows: 5,\n              placeholder: \"Write a review...\",\n              values: formik.values.comment || formik.initialValues.comment\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            type: \"submit\",\n            disabled: !formik.isValid || formik.isSubmitting || formik.values.rating === formik.initialValues.rating && formik.values.comment === formik.initialValues.comment,\n            variant: \"contained\",\n            disableElevation: true,\n            className: classes.btn,\n            children: \"POST\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(ReviewForm, \"SlX0cMQwFpyz3wo/Ve6Gd6ripdQ=\", false, function () {\n  return [useStyles, useDispatch];\n});\n\n_c = ReviewForm;\nexport default ReviewForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"ReviewForm\");","map":{"version":3,"sources":["/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/server/client/src/components/products/components/ReviewForm.js"],"names":["React","useState","useDispatch","Formik","Form","Yup","FormikTextField","PageHeading","createProductReview","makeStyles","Paper","Button","Rating","Typography","useStyles","theme","root","maxWidth","margin","textAlign","ratingBox","minHeight","display","alignItems","padding","btn","width","backgroundColor","palette","primary","dark","fontSize","fontWeight","borderRadius","color","main","ratingLabels","ReviewForm","loggedInUser","product","review","refreshReviews","classes","dispatch","hover","setHover","initialValues","rating","comment","validationSchema","object","number","required","positive","oneOf","Array","keys","map","num","string","notRequired","onSuccess","submitHandler","values","actions","reviewInfo","Number","trim","id","token","setSubmitting","formik","event","val","target","value","setFieldValue","newHover","marginLeft","lineHeight","formControl","isValid","isSubmitting"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { Formik, Form } from 'formik';\nimport * as Yup from 'yup';\n\nimport FormikTextField from '../../shared/formElements/FormikTextField';\nimport PageHeading from '../../shared/ui/PageHeading';\n\nimport { createProductReview } from '../../../redux/actionCreators/reviewActionCreators';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport Button from '@material-ui/core/Button';\nimport Rating from '@material-ui/lab/Rating';\nimport Typography from '@material-ui/core/Typography';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    maxWidth: '600px',\n    margin: '10px 0px 70px 20px',\n    textAlign: 'left',\n  },\n  ratingBox: {\n    minHeight: '40px',\n    display: 'flex',\n    alignItems: 'center',\n    margin: 0,\n    padding: 0,\n  },\n  btn: {\n    padding: '12px',\n    width: '90px',\n    backgroundColor: theme.palette.primary.dark,\n    fontSize: '14px',\n    fontWeight: '700',\n    borderRadius: '0px',\n    color: '#fff',\n    '&:hover': {\n      backgroundColor: theme.palette.primary.main,\n    },\n  },\n}));\nconst ratingLabels = {\n  1: 'Useless',\n  2: 'Poor',\n  3: 'Ok',\n  4: 'Good',\n  5: 'Excellent',\n};\nconst ReviewForm = ({ loggedInUser, product, review, refreshReviews }) => {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const [hover, setHover] = useState(-1);\n  const initialValues = {\n    rating: review?.rating || 0,\n    comment: review?.comment || '',\n  };\n  const validationSchema = Yup.object({\n    rating: Yup.number('Must be a number')\n      .required('Price required')\n      .positive('Must be positive')\n      .oneOf([...Array(5).keys()].map((num) => num + 1)),\n    comment: Yup.string().notRequired(),\n  });\n  const onSuccess = () => {\n    refreshReviews();\n  };\n  const submitHandler = async (values, actions) => {\n    const reviewInfo = {\n      rating: Number(values.rating),\n      comment: values.comment?.trim(),\n    };\n\n    dispatch(\n      createProductReview(\n        product.id,\n        loggedInUser?.token,\n        reviewInfo,\n        onSuccess\n      )\n    );\n    actions.setSubmitting(false);\n  };\n\n  return (\n    <>\n      <PageHeading text=\"Rate or post a review\" size=\"medium\" />\n      <Paper className={classes.root} elevation={0}>\n        <Formik\n          initialValues={initialValues}\n          validationSchema={validationSchema}\n          onSubmit={submitHandler}\n          validateOnMount\n          enableReinitialize\n        >\n          {(formik) => (\n            <Form>\n              <div className={classes.ratingBox}>\n                <Rating\n                  name=\"rating\"\n                  label=\"Leave a rating\"\n                  value={formik.values.rating || formik.initialValues.rating}\n                  onChange={(event) => {\n                    const val = Number(event.target.value);\n                    formik.setFieldValue('rating', val);\n                  }}\n                  onChangeActive={(event, newHover) => {\n                    setHover(newHover);\n                  }}\n                  precision={1.0}\n                />\n                {formik.values.rating !== null && (\n                  <Typography\n                    variant=\"caption\"\n                    color=\"textSecondary\"\n                    style={{ marginLeft: '10px', lineHeight: '2rem' }}\n                  >\n                    <em>\n                      {\n                        ratingLabels[\n                          hover !== -1 ? hover : formik.values.rating\n                        ]\n                      }\n                    </em>\n                  </Typography>\n                )}\n              </div>\n              <div className={classes.formControl}>\n                <FormikTextField\n                  fieldName=\"comment\"\n                  type=\"text\"\n                  label=\"Leave a comment\"\n                  as=\"textarea\"\n                  variant=\"outlined\"\n                  maxLength={1000}\n                  multiline\n                  rows={5}\n                  placeholder=\"Write a review...\"\n                  values={formik.values.comment || formik.initialValues.comment}\n                />\n              </div>\n              <Button\n                type=\"submit\"\n                disabled={\n                  !formik.isValid ||\n                  formik.isSubmitting ||\n                  (formik.values.rating === formik.initialValues.rating &&\n                    formik.values.comment === formik.initialValues.comment)\n                }\n                variant=\"contained\"\n                disableElevation\n                className={classes.btn}\n              >\n                POST\n              </Button>\n            </Form>\n          )}\n        </Formik>\n      </Paper>\n    </>\n  );\n};\n\nexport default ReviewForm;\n"]},"metadata":{},"sourceType":"module"}
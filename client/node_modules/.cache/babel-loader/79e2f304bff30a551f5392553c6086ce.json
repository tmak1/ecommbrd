{"ast":null,"code":"import _regeneratorRuntime from\"/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import*as req from'../actions/shippingActions';import{sendRequest}from'../../helpers';var clearLocalStorage=function clearLocalStorage(props){var shoppingapp=localStorage.getItem('shoppingapp');if(shoppingapp){shoppingapp=JSON.parse(shoppingapp);if(shoppingapp[props]){delete shoppingapp[props];}return localStorage.setItem('shoppingapp',JSON.stringify(shoppingapp));}};var updateLocalStorage=function updateLocalStorage(shippingAddresses){var shoppingapp=localStorage.getItem('shoppingapp');if(shoppingapp){shoppingapp=JSON.parse(shoppingapp);if((shippingAddresses===null||shippingAddresses===void 0?void 0:shippingAddresses.length)>0){return localStorage.setItem('shoppingapp',JSON.stringify(_objectSpread(_objectSpread({},shoppingapp),{},{shippingAddresses:shippingAddresses})));}delete shoppingapp.shippingAddresses;return localStorage.setItem('shoppingapp',JSON.stringify(shoppingapp));}if(shippingAddresses){localStorage.setItem('shoppingapp',JSON.stringify({shippingAddresses:shippingAddresses}));}};export var getShippingAddresses=function getShippingAddresses(userId,token){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch,getState){var _yield$sendRequest,error,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;dispatch({type:req.SHIPPING_ADDRESSES_REQUEST});_context.next=4;return sendRequest(\"\".concat(process.env.REACT_APP_API_URL,\"/shipping/users/\").concat(userId),'GET',{Authorization:\"Bearer \".concat(token)});case 4:_yield$sendRequest=_context.sent;error=_yield$sendRequest.error;data=_yield$sendRequest.data;if(!error){_context.next=9;break;}return _context.abrupt(\"return\",dispatch({type:req.SHIPPING_ADDRESSES_FAILURE,payload:error}));case 9:dispatch({type:req.SHIPPING_ADDRESSES_SUCCESS,payload:data});updateLocalStorage(getState().shipping.shippingAddresses);_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 16:case\"end\":return _context.stop();}}},_callee,null,[[0,13]]);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();};export var saveShippingAddress=function saveShippingAddress(userId,token,shippingInfo,onSuccess){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch,getState){var _yield$sendRequest2,error,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;dispatch({type:req.SAVE_SHIPPING_REQUEST});_context2.next=4;return sendRequest(\"\".concat(process.env.REACT_APP_API_URL,\"/shipping/users/\").concat(userId,\"/new\"),'POST',{'Content-Type':'application/json',Authorization:\"Bearer \".concat(token)},JSON.stringify(shippingInfo));case 4:_yield$sendRequest2=_context2.sent;error=_yield$sendRequest2.error;data=_yield$sendRequest2.data;if(!error){_context2.next=9;break;}return _context2.abrupt(\"return\",dispatch({type:req.SAVE_SHIPPING_FAILURE,payload:error}));case 9:dispatch({type:req.SAVE_SHIPPING_SUCCESS,payload:data});updateLocalStorage(getState().shipping.shippingAddresses);onSuccess('saved');_context2.next=17;break;case 14:_context2.prev=14;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 17:case\"end\":return _context2.stop();}}},_callee2,null,[[0,14]]);}));return function(_x3,_x4){return _ref2.apply(this,arguments);};}();};export var updateShippingAddress=function updateShippingAddress(userId,token,shippingId,shippingInfo,onSuccess){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch,getState){var _yield$sendRequest3,error,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;dispatch({type:req.EDIT_SHIPPING_REQUEST});_context3.next=4;return sendRequest(\"\".concat(process.env.REACT_APP_API_URL,\"/shipping/\").concat(shippingId,\"/users/\").concat(userId),'PATCH',{'Content-Type':'application/json',Authorization:\"Bearer \".concat(token)},JSON.stringify(shippingInfo));case 4:_yield$sendRequest3=_context3.sent;error=_yield$sendRequest3.error;data=_yield$sendRequest3.data;if(!error){_context3.next=9;break;}return _context3.abrupt(\"return\",dispatch({type:req.EDIT_SHIPPING_FAILURE,payload:error}));case 9:dispatch({type:req.EDIT_SHIPPING_SUCCESS,payload:data});updateLocalStorage(getState().shipping.shippingAddresses);onSuccess('updated');_context3.next=17;break;case 14:_context3.prev=14;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);case 17:case\"end\":return _context3.stop();}}},_callee3,null,[[0,14]]);}));return function(_x5,_x6){return _ref3.apply(this,arguments);};}();};export var removeShippingAddress=function removeShippingAddress(userId,token,shippingId,onSuccess){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch,getState){var _yield$sendRequest4,error,data;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;dispatch({type:req.REMOVE_SHIPPING_REQUEST});_context4.next=4;return sendRequest(\"\".concat(process.env.REACT_APP_API_URL,\"/shipping/\").concat(shippingId,\"/users/\").concat(userId),'DELETE',{'Content-Type':'application/json',Authorization:\"Bearer \".concat(token)});case 4:_yield$sendRequest4=_context4.sent;error=_yield$sendRequest4.error;data=_yield$sendRequest4.data;if(!error){_context4.next=9;break;}return _context4.abrupt(\"return\",dispatch({type:req.REMOVE_SHIPPING_FAILURE,payload:error}));case 9:dispatch({type:req.REMOVE_SHIPPING_SUCCESS,payload:data});updateLocalStorage(getState().shipping.shippingAddresses);onSuccess('removed');_context4.next=17;break;case 14:_context4.prev=14;_context4.t0=_context4[\"catch\"](0);console.log(_context4.t0);case 17:case\"end\":return _context4.stop();}}},_callee4,null,[[0,14]]);}));return function(_x7,_x8){return _ref4.apply(this,arguments);};}();};export var removeAllShippingAddresses=function removeAllShippingAddresses(){return function(dispatch,getState){dispatch({type:req.REMOVE_ALL_SHIPPING});clearLocalStorage('shippingAddresses');};};","map":{"version":3,"sources":["/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/client/src/redux/actionCreators/shippingActionCreators.js"],"names":["req","sendRequest","clearLocalStorage","props","shoppingapp","localStorage","getItem","JSON","parse","setItem","stringify","updateLocalStorage","shippingAddresses","length","getShippingAddresses","userId","token","dispatch","getState","type","SHIPPING_ADDRESSES_REQUEST","process","env","REACT_APP_API_URL","Authorization","error","data","SHIPPING_ADDRESSES_FAILURE","payload","SHIPPING_ADDRESSES_SUCCESS","shipping","console","log","saveShippingAddress","shippingInfo","onSuccess","SAVE_SHIPPING_REQUEST","SAVE_SHIPPING_FAILURE","SAVE_SHIPPING_SUCCESS","updateShippingAddress","shippingId","EDIT_SHIPPING_REQUEST","EDIT_SHIPPING_FAILURE","EDIT_SHIPPING_SUCCESS","removeShippingAddress","REMOVE_SHIPPING_REQUEST","REMOVE_SHIPPING_FAILURE","REMOVE_SHIPPING_SUCCESS","removeAllShippingAddresses","REMOVE_ALL_SHIPPING"],"mappings":"ofAAA,MAAO,GAAKA,CAAAA,GAAZ,KAAqB,4BAArB,CACA,OAASC,WAAT,KAA4B,eAA5B,CAEA,GAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAACC,KAAD,CAAW,CACnC,GAAIC,CAAAA,WAAW,CAAGC,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAlB,CACA,GAAIF,WAAJ,CAAiB,CACfA,WAAW,CAAGG,IAAI,CAACC,KAAL,CAAWJ,WAAX,CAAd,CACA,GAAIA,WAAW,CAACD,KAAD,CAAf,CAAwB,CACtB,MAAOC,CAAAA,WAAW,CAACD,KAAD,CAAlB,CACD,CACD,MAAOE,CAAAA,YAAY,CAACI,OAAb,CAAqB,aAArB,CAAoCF,IAAI,CAACG,SAAL,CAAeN,WAAf,CAApC,CAAP,CACD,CACF,CATD,CAWA,GAAMO,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAACC,iBAAD,CAAuB,CAChD,GAAIR,CAAAA,WAAW,CAAGC,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAlB,CACA,GAAIF,WAAJ,CAAiB,CACfA,WAAW,CAAGG,IAAI,CAACC,KAAL,CAAWJ,WAAX,CAAd,CACA,GAAI,CAAAQ,iBAAiB,OAAjB,EAAAA,iBAAiB,SAAjB,QAAAA,iBAAiB,CAAEC,MAAnB,EAA4B,CAAhC,CAAmC,CACjC,MAAOR,CAAAA,YAAY,CAACI,OAAb,CACL,aADK,CAELF,IAAI,CAACG,SAAL,gCAAoBN,WAApB,MAAiCQ,iBAAiB,CAAjBA,iBAAjC,GAFK,CAAP,CAID,CACD,MAAOR,CAAAA,WAAW,CAACQ,iBAAnB,CACA,MAAOP,CAAAA,YAAY,CAACI,OAAb,CAAqB,aAArB,CAAoCF,IAAI,CAACG,SAAL,CAAeN,WAAf,CAApC,CAAP,CACD,CACD,GAAIQ,iBAAJ,CAAuB,CACrBP,YAAY,CAACI,OAAb,CAAqB,aAArB,CAAoCF,IAAI,CAACG,SAAL,CAAe,CAAEE,iBAAiB,CAAjBA,iBAAF,CAAf,CAApC,EACD,CACF,CAhBD,CAkBA,MAAO,IAAME,CAAAA,oBAAoB,CAC/B,QADWA,CAAAA,oBACX,CAACC,MAAD,CAASC,KAAT,iGAAmB,iBAAOC,QAAP,CAAiBC,QAAjB,oKAEfD,QAAQ,CAAC,CAAEE,IAAI,CAAEnB,GAAG,CAACoB,0BAAZ,CAAD,CAAR,CAFe,sBAGenB,CAAAA,WAAW,WACpCoB,OAAO,CAACC,GAAR,CAAYC,iBADwB,4BACYR,MADZ,EAEvC,KAFuC,CAGvC,CAAES,aAAa,kBAAYR,KAAZ,CAAf,CAHuC,CAH1B,yCAGPS,KAHO,oBAGPA,KAHO,CAGAC,IAHA,oBAGAA,IAHA,KAQXD,KARW,yDASNR,QAAQ,CAAC,CACdE,IAAI,CAAEnB,GAAG,CAAC2B,0BADI,CAEdC,OAAO,CAAEH,KAFK,CAAD,CATF,SAcfR,QAAQ,CAAC,CAAEE,IAAI,CAAEnB,GAAG,CAAC6B,0BAAZ,CAAwCD,OAAO,CAAEF,IAAjD,CAAD,CAAR,CACAf,kBAAkB,CAACO,QAAQ,GAAGY,QAAX,CAAoBlB,iBAArB,CAAlB,CAfe,iFAiBfmB,OAAO,CAACC,GAAR,cAjBe,qEAAnB,oEADK,CAsBP,MAAO,IAAMC,CAAAA,mBAAmB,CAC9B,QADWA,CAAAA,mBACX,CAAClB,MAAD,CAASC,KAAT,CAAgBkB,YAAhB,CAA8BC,SAA9B,kGAA4C,kBAAOlB,QAAP,CAAiBC,QAAjB,0KAExCD,QAAQ,CAAC,CAAEE,IAAI,CAAEnB,GAAG,CAACoC,qBAAZ,CAAD,CAAR,CAFwC,uBAGVnC,CAAAA,WAAW,WACpCoB,OAAO,CAACC,GAAR,CAAYC,iBADwB,4BACYR,MADZ,SAEvC,MAFuC,CAGvC,CACE,eAAgB,kBADlB,CAEES,aAAa,kBAAYR,KAAZ,CAFf,CAHuC,CAOvCT,IAAI,CAACG,SAAL,CAAewB,YAAf,CAPuC,CAHD,2CAGhCT,KAHgC,qBAGhCA,KAHgC,CAGzBC,IAHyB,qBAGzBA,IAHyB,KAYpCD,KAZoC,2DAa/BR,QAAQ,CAAC,CAAEE,IAAI,CAAEnB,GAAG,CAACqC,qBAAZ,CAAmCT,OAAO,CAAEH,KAA5C,CAAD,CAbuB,SAexCR,QAAQ,CAAC,CAAEE,IAAI,CAAEnB,GAAG,CAACsC,qBAAZ,CAAmCV,OAAO,CAAEF,IAA5C,CAAD,CAAR,CACAf,kBAAkB,CAACO,QAAQ,GAAGY,QAAX,CAAoBlB,iBAArB,CAAlB,CACAuB,SAAS,CAAC,OAAD,CAAT,CAjBwC,qFAmBxCJ,OAAO,CAACC,GAAR,eAnBwC,uEAA5C,sEADK,CAwBP,MAAO,IAAMO,CAAAA,qBAAqB,CAChC,QADWA,CAAAA,qBACX,CAACxB,MAAD,CAASC,KAAT,CAAgBwB,UAAhB,CAA4BN,YAA5B,CAA0CC,SAA1C,kGACA,kBAAOlB,QAAP,CAAiBC,QAAjB,0KAEID,QAAQ,CAAC,CAAEE,IAAI,CAAEnB,GAAG,CAACyC,qBAAZ,CAAD,CAAR,CAFJ,uBAGkCxC,CAAAA,WAAW,WACpCoB,OAAO,CAACC,GAAR,CAAYC,iBADwB,sBACMiB,UADN,mBAC0BzB,MAD1B,EAEvC,OAFuC,CAGvC,CACE,eAAgB,kBADlB,CAEES,aAAa,kBAAYR,KAAZ,CAFf,CAHuC,CAOvCT,IAAI,CAACG,SAAL,CAAewB,YAAf,CAPuC,CAH7C,2CAGYT,KAHZ,qBAGYA,KAHZ,CAGmBC,IAHnB,qBAGmBA,IAHnB,KAYQD,KAZR,2DAaaR,QAAQ,CAAC,CAAEE,IAAI,CAAEnB,GAAG,CAAC0C,qBAAZ,CAAmCd,OAAO,CAAEH,KAA5C,CAAD,CAbrB,SAeIR,QAAQ,CAAC,CAAEE,IAAI,CAAEnB,GAAG,CAAC2C,qBAAZ,CAAmCf,OAAO,CAAEF,IAA5C,CAAD,CAAR,CACAf,kBAAkB,CAACO,QAAQ,GAAGY,QAAX,CAAoBlB,iBAArB,CAAlB,CACAuB,SAAS,CAAC,SAAD,CAAT,CAjBJ,qFAmBIJ,OAAO,CAACC,GAAR,eAnBJ,uEADA,sEADK,CAyBP,MAAO,IAAMY,CAAAA,qBAAqB,CAChC,QADWA,CAAAA,qBACX,CAAC7B,MAAD,CAASC,KAAT,CAAgBwB,UAAhB,CAA4BL,SAA5B,kGAA0C,kBAAOlB,QAAP,CAAiBC,QAAjB,0KAEtCD,QAAQ,CAAC,CAAEE,IAAI,CAAEnB,GAAG,CAAC6C,uBAAZ,CAAD,CAAR,CAFsC,uBAGR5C,CAAAA,WAAW,WACpCoB,OAAO,CAACC,GAAR,CAAYC,iBADwB,sBACMiB,UADN,mBAC0BzB,MAD1B,EAEvC,QAFuC,CAGvC,CAAE,eAAgB,kBAAlB,CAAsCS,aAAa,kBAAYR,KAAZ,CAAnD,CAHuC,CAHH,2CAG9BS,KAH8B,qBAG9BA,KAH8B,CAGvBC,IAHuB,qBAGvBA,IAHuB,KAQlCD,KARkC,2DAS7BR,QAAQ,CAAC,CAAEE,IAAI,CAAEnB,GAAG,CAAC8C,uBAAZ,CAAqClB,OAAO,CAAEH,KAA9C,CAAD,CATqB,SAWtCR,QAAQ,CAAC,CAAEE,IAAI,CAAEnB,GAAG,CAAC+C,uBAAZ,CAAqCnB,OAAO,CAAEF,IAA9C,CAAD,CAAR,CACAf,kBAAkB,CAACO,QAAQ,GAAGY,QAAX,CAAoBlB,iBAArB,CAAlB,CACAuB,SAAS,CAAC,SAAD,CAAT,CAbsC,qFAetCJ,OAAO,CAACC,GAAR,eAfsC,uEAA1C,sEADK,CAoBP,MAAO,IAAMgB,CAAAA,0BAA0B,CAAG,QAA7BA,CAAAA,0BAA6B,SAAM,UAAC/B,QAAD,CAAWC,QAAX,CAAwB,CACtED,QAAQ,CAAC,CAAEE,IAAI,CAAEnB,GAAG,CAACiD,mBAAZ,CAAD,CAAR,CACA/C,iBAAiB,CAAC,mBAAD,CAAjB,CACD,CAHyC,EAAnC","sourcesContent":["import * as req from '../actions/shippingActions';\nimport { sendRequest } from '../../helpers';\n\nconst clearLocalStorage = (props) => {\n  let shoppingapp = localStorage.getItem('shoppingapp');\n  if (shoppingapp) {\n    shoppingapp = JSON.parse(shoppingapp);\n    if (shoppingapp[props]) {\n      delete shoppingapp[props];\n    }\n    return localStorage.setItem('shoppingapp', JSON.stringify(shoppingapp));\n  }\n};\n\nconst updateLocalStorage = (shippingAddresses) => {\n  let shoppingapp = localStorage.getItem('shoppingapp');\n  if (shoppingapp) {\n    shoppingapp = JSON.parse(shoppingapp);\n    if (shippingAddresses?.length > 0) {\n      return localStorage.setItem(\n        'shoppingapp',\n        JSON.stringify({ ...shoppingapp, shippingAddresses })\n      );\n    }\n    delete shoppingapp.shippingAddresses;\n    return localStorage.setItem('shoppingapp', JSON.stringify(shoppingapp));\n  }\n  if (shippingAddresses) {\n    localStorage.setItem('shoppingapp', JSON.stringify({ shippingAddresses }));\n  }\n};\n\nexport const getShippingAddresses =\n  (userId, token) => async (dispatch, getState) => {\n    try {\n      dispatch({ type: req.SHIPPING_ADDRESSES_REQUEST });\n      const { error, data } = await sendRequest(\n        `${process.env.REACT_APP_API_URL}/shipping/users/${userId}`,\n        'GET',\n        { Authorization: `Bearer ${token}` }\n      );\n      if (error) {\n        return dispatch({\n          type: req.SHIPPING_ADDRESSES_FAILURE,\n          payload: error,\n        });\n      }\n      dispatch({ type: req.SHIPPING_ADDRESSES_SUCCESS, payload: data });\n      updateLocalStorage(getState().shipping.shippingAddresses);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\nexport const saveShippingAddress =\n  (userId, token, shippingInfo, onSuccess) => async (dispatch, getState) => {\n    try {\n      dispatch({ type: req.SAVE_SHIPPING_REQUEST });\n      const { error, data } = await sendRequest(\n        `${process.env.REACT_APP_API_URL}/shipping/users/${userId}/new`,\n        'POST',\n        {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`,\n        },\n        JSON.stringify(shippingInfo)\n      );\n      if (error) {\n        return dispatch({ type: req.SAVE_SHIPPING_FAILURE, payload: error });\n      }\n      dispatch({ type: req.SAVE_SHIPPING_SUCCESS, payload: data });\n      updateLocalStorage(getState().shipping.shippingAddresses);\n      onSuccess('saved');\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\nexport const updateShippingAddress =\n  (userId, token, shippingId, shippingInfo, onSuccess) =>\n  async (dispatch, getState) => {\n    try {\n      dispatch({ type: req.EDIT_SHIPPING_REQUEST });\n      const { error, data } = await sendRequest(\n        `${process.env.REACT_APP_API_URL}/shipping/${shippingId}/users/${userId}`,\n        'PATCH',\n        {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`,\n        },\n        JSON.stringify(shippingInfo)\n      );\n      if (error) {\n        return dispatch({ type: req.EDIT_SHIPPING_FAILURE, payload: error });\n      }\n      dispatch({ type: req.EDIT_SHIPPING_SUCCESS, payload: data });\n      updateLocalStorage(getState().shipping.shippingAddresses);\n      onSuccess('updated');\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\nexport const removeShippingAddress =\n  (userId, token, shippingId, onSuccess) => async (dispatch, getState) => {\n    try {\n      dispatch({ type: req.REMOVE_SHIPPING_REQUEST });\n      const { error, data } = await sendRequest(\n        `${process.env.REACT_APP_API_URL}/shipping/${shippingId}/users/${userId}`,\n        'DELETE',\n        { 'Content-Type': 'application/json', Authorization: `Bearer ${token}` }\n      );\n      if (error) {\n        return dispatch({ type: req.REMOVE_SHIPPING_FAILURE, payload: error });\n      }\n      dispatch({ type: req.REMOVE_SHIPPING_SUCCESS, payload: data });\n      updateLocalStorage(getState().shipping.shippingAddresses);\n      onSuccess('removed');\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\nexport const removeAllShippingAddresses = () => (dispatch, getState) => {\n  dispatch({ type: req.REMOVE_ALL_SHIPPING });\n  clearLocalStorage('shippingAddresses');\n};\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _regeneratorRuntime from\"/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _defineProperty from\"/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import React,{useState,useRef}from'react';import{Formik,Form}from'formik';import*as Yup from'yup';import FormikTextField from'../../shared/formElements/FormikTextField';import ImageUpload from'../../shared/formElements/ImageUpload';import LoadingLinear from'../../shared/ui/LoadingLinear';import{makeStyles}from'@material-ui/core/styles';import Paper from'@material-ui/core/Paper';import Button from'@material-ui/core/Button';import TextField from'@material-ui/core/TextField';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{root:{minWidth:'600px',padding:'20px',margin:'0 auto',textAlign:'center'},btn:{width:'40%',margin:'30px auto 10px auto',padding:'12px',backgroundColor:theme.palette.primary.dark,fontSize:'14px',fontWeight:'700',borderRadius:'0',color:'#fff','&:hover':{backgroundColor:theme.palette.primary.main}},select:_defineProperty({},theme.breakpoints.down('xs'),{width:theme.spacing(4),height:theme.spacing(4),fontSize:'13px'}),previewBox:{margin:'0 auto','&>img':{width:'250px',height:'250px'}}};});var UserProductUpdateModalForm=function UserProductUpdateModalForm(_ref){var productToUpdate=_ref.productToUpdate,handleUpdate=_ref.handleUpdate,categories=_ref.categories,loggedInUser=_ref.loggedInUser;var classes=useStyles();var ref=useRef();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loadingImageUpload=_useState2[0],setLoadingImageUpload=_useState2[1];var initialValues={name:productToUpdate===null||productToUpdate===void 0?void 0:productToUpdate.name,price:productToUpdate===null||productToUpdate===void 0?void 0:productToUpdate.price,countInStock:productToUpdate===null||productToUpdate===void 0?void 0:productToUpdate.countInStock,imageUrl:productToUpdate===null||productToUpdate===void 0?void 0:productToUpdate.imageUrl,description:productToUpdate===null||productToUpdate===void 0?void 0:productToUpdate.description,brand:productToUpdate===null||productToUpdate===void 0?void 0:productToUpdate.brand,category:productToUpdate.category};var validationSchema=Yup.object({name:Yup.string().required('Name required'),price:Yup.number('Must be a number').required('Price required').positive('Must be positive'),countInStock:Yup.number('Must be a number').required('Count in Stock required').positive('Must be positive').integer('No decimal points'),imageUrl:Yup.string().required('Image url required'),description:Yup.string().required('Description required'),brand:Yup.string().required('Brand required'),category:Yup.string().required('Category required').oneOf(categories)});var submitHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(values,actions){var imageUrl,productInfo;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setLoadingImageUpload(true);_context.next=4;return ref.current.handleUpload(values.name);case 4:imageUrl=_context.sent;_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:_context.prev=10;setLoadingImageUpload(false);return _context.finish(10);case 13:productInfo={name:values.name,price:values.price,countInStock:values.countInStock,imageUrl:imageUrl,description:values.description,brand:values.brand,category:values.category};console.log(values);handleUpdate(productInfo);actions.setSubmitting(false);case 17:case\"end\":return _context.stop();}}},_callee,null,[[0,7,10,13]]);}));return function submitHandler(_x,_x2){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Paper,{className:classes.root,elevation:0,children:[loadingImageUpload&&/*#__PURE__*/_jsx(LoadingLinear,{}),/*#__PURE__*/_jsx(Formik,{initialValues:initialValues,validationSchema:validationSchema,onSubmit:submitHandler,validateOnMount:true,enableReinitialize:true,children:function children(formik){return/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsx(\"div\",{className:classes.formControl,children:/*#__PURE__*/_jsx(FormikTextField,{fieldName:\"name\",type:\"text\",label:\"Name\",variant:\"outlined\",values:formik.initialValues.name})}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'center'},children:/*#__PURE__*/_jsx(ImageUpload,{token:loggedInUser===null||loggedInUser===void 0?void 0:loggedInUser.token,ref:ref})}),/*#__PURE__*/_jsx(\"div\",{className:classes.formControl,children:/*#__PURE__*/_jsx(FormikTextField,{fieldName:\"price\",type:\"number\",label:\"Price\",variant:\"outlined\",adornmentPosition:\"start\",adornment:\"$ \",values:formik.initialValues.price})}),/*#__PURE__*/_jsx(\"div\",{className:classes.formControl,children:/*#__PURE__*/_jsx(FormikTextField,{fieldName:\"countInStock\",type:\"number\",label:\"Count in Stock\",variant:\"outlined\",values:formik.initialValues.countInStock})}),/*#__PURE__*/_jsx(\"div\",{className:classes.formControl,children:/*#__PURE__*/_jsx(FormikTextField,{fieldName:\"description\",type:\"text\",label:\"Description\",variant:\"outlined\",multiline:true,rows:3,values:formik.initialValues.description})}),/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'left',margin:'12px'},children:/*#__PURE__*/_jsx(TextField,{className:classes.select,select:true,label:\"Category\",onChange:function onChange(event){return formik.setFieldValue('category',event.target.value);},value:formik.values.category||formik.initialValues.category,SelectProps:{native:true},variant:\"outlined\",children:categories.map(function(category){return/*#__PURE__*/_jsx(\"option\",{value:category,children:category},category);})})}),/*#__PURE__*/_jsx(\"div\",{className:classes.formControl,children:/*#__PURE__*/_jsx(FormikTextField,{fieldName:\"brand\",type:\"text\",label:\"Brand\",variant:\"outlined\",values:formik.initialValues.brand})}),/*#__PURE__*/_jsx(Button,{type:\"submit\",disabled:!formik.isValid||formik.isSubmitting||formik.values.name===formik.initialValues.name&&formik.values.price===formik.initialValues.price&&formik.values.countInStock===formik.initialValues.countInStock&&formik.values.image===formik.initialValues.image&&formik.values.description===formik.initialValues.description&&formik.values.brand===formik.initialValues.brand&&formik.values.category===formik.initialValues.category,variant:\"contained\",disableElevation:true,className:classes.btn,children:\"CHANGE\"})]});}})]});};export default UserProductUpdateModalForm;","map":{"version":3,"sources":["/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/client/src/components/users/components/UserProductUpdateModalForm.js"],"names":["React","useState","useRef","Formik","Form","Yup","FormikTextField","ImageUpload","LoadingLinear","makeStyles","Paper","Button","TextField","useStyles","theme","root","minWidth","padding","margin","textAlign","btn","width","backgroundColor","palette","primary","dark","fontSize","fontWeight","borderRadius","color","main","select","breakpoints","down","spacing","height","previewBox","UserProductUpdateModalForm","productToUpdate","handleUpdate","categories","loggedInUser","classes","ref","loadingImageUpload","setLoadingImageUpload","initialValues","name","price","countInStock","imageUrl","description","brand","category","validationSchema","object","string","required","number","positive","integer","oneOf","submitHandler","values","actions","current","handleUpload","console","log","productInfo","setSubmitting","formik","formControl","display","justifyContent","token","event","setFieldValue","target","value","native","map","isValid","isSubmitting","image"],"mappings":"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","sourcesContent":["import React, { useState, useRef } from 'react';\nimport { Formik, Form } from 'formik';\nimport * as Yup from 'yup';\n\nimport FormikTextField from '../../shared/formElements/FormikTextField';\nimport ImageUpload from '../../shared/formElements/ImageUpload';\nimport LoadingLinear from '../../shared/ui/LoadingLinear';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    minWidth: '600px',\n    padding: '20px',\n    margin: '0 auto',\n    textAlign: 'center',\n  },\n  btn: {\n    width: '40%',\n    margin: '30px auto 10px auto',\n    padding: '12px',\n    backgroundColor: theme.palette.primary.dark,\n    fontSize: '14px',\n    fontWeight: '700',\n    borderRadius: '0',\n    color: '#fff',\n    '&:hover': {\n      backgroundColor: theme.palette.primary.main,\n    },\n  },\n  select: {\n    [theme.breakpoints.down('xs')]: {\n      width: theme.spacing(4),\n      height: theme.spacing(4),\n      fontSize: '13px',\n    },\n  },\n  previewBox: {\n    margin: '0 auto',\n    '&>img': {\n      width: '250px',\n      height: '250px',\n    },\n  },\n}));\nconst UserProductUpdateModalForm = ({\n  productToUpdate,\n  handleUpdate,\n  categories,\n  loggedInUser,\n}) => {\n  const classes = useStyles();\n  const ref = useRef();\n  const [loadingImageUpload, setLoadingImageUpload] = useState(false);\n  const initialValues = {\n    name: productToUpdate?.name,\n    price: productToUpdate?.price,\n    countInStock: productToUpdate?.countInStock,\n    imageUrl: productToUpdate?.imageUrl,\n    description: productToUpdate?.description,\n    brand: productToUpdate?.brand,\n    category: productToUpdate.category,\n  };\n  const validationSchema = Yup.object({\n    name: Yup.string().required('Name required'),\n    price: Yup.number('Must be a number')\n      .required('Price required')\n      .positive('Must be positive'),\n    countInStock: Yup.number('Must be a number')\n      .required('Count in Stock required')\n      .positive('Must be positive')\n      .integer('No decimal points'),\n    imageUrl: Yup.string().required('Image url required'),\n    description: Yup.string().required('Description required'),\n    brand: Yup.string().required('Brand required'),\n    category: Yup.string().required('Category required').oneOf(categories),\n  });\n  const submitHandler = async (values, actions) => {\n    let imageUrl;\n    try {\n      setLoadingImageUpload(true);\n      imageUrl = await ref.current.handleUpload(values.name);\n    } catch (error) {\n      console.log(error);\n    } finally {\n      setLoadingImageUpload(false);\n    }\n    const productInfo = {\n      name: values.name,\n      price: values.price,\n      countInStock: values.countInStock,\n      imageUrl: imageUrl,\n      description: values.description,\n      brand: values.brand,\n      category: values.category,\n    };\n    console.log(values);\n    handleUpdate(productInfo);\n    actions.setSubmitting(false);\n  };\n\n  return (\n    <Paper className={classes.root} elevation={0}>\n      {loadingImageUpload && <LoadingLinear />}\n      <Formik\n        initialValues={initialValues}\n        validationSchema={validationSchema}\n        onSubmit={submitHandler}\n        validateOnMount\n        enableReinitialize\n      >\n        {(formik) => (\n          <Form>\n            <div className={classes.formControl}>\n              <FormikTextField\n                fieldName=\"name\"\n                type=\"text\"\n                label=\"Name\"\n                variant=\"outlined\"\n                values={formik.initialValues.name}\n              />\n            </div>\n            <div style={{ display: 'flex', justifyContent: 'center' }}>\n              <ImageUpload token={loggedInUser?.token} ref={ref} />\n            </div>\n            <div className={classes.formControl}>\n              <FormikTextField\n                fieldName=\"price\"\n                type=\"number\"\n                label=\"Price\"\n                variant=\"outlined\"\n                adornmentPosition=\"start\"\n                adornment=\"$ \"\n                values={formik.initialValues.price}\n              />\n            </div>\n            <div className={classes.formControl}>\n              <FormikTextField\n                fieldName=\"countInStock\"\n                type=\"number\"\n                label=\"Count in Stock\"\n                variant=\"outlined\"\n                values={formik.initialValues.countInStock}\n              />\n            </div>\n            <div className={classes.formControl}>\n              <FormikTextField\n                fieldName=\"description\"\n                type=\"text\"\n                label=\"Description\"\n                variant=\"outlined\"\n                multiline\n                rows={3}\n                values={formik.initialValues.description}\n              />\n            </div>\n            <div style={{ textAlign: 'left', margin: '12px' }}>\n              <TextField\n                className={classes.select}\n                select\n                label=\"Category\"\n                onChange={(event) =>\n                  formik.setFieldValue('category', event.target.value)\n                }\n                value={formik.values.category || formik.initialValues.category}\n                SelectProps={{\n                  native: true,\n                }}\n                variant=\"outlined\"\n              >\n                {categories.map((category) => (\n                  <option key={category} value={category}>\n                    {category}\n                  </option>\n                ))}\n              </TextField>\n            </div>\n            <div className={classes.formControl}>\n              <FormikTextField\n                fieldName=\"brand\"\n                type=\"text\"\n                label=\"Brand\"\n                variant=\"outlined\"\n                values={formik.initialValues.brand}\n              />\n            </div>\n            <Button\n              type=\"submit\"\n              disabled={\n                !formik.isValid ||\n                formik.isSubmitting ||\n                (formik.values.name === formik.initialValues.name &&\n                  formik.values.price === formik.initialValues.price &&\n                  formik.values.countInStock ===\n                    formik.initialValues.countInStock &&\n                  formik.values.image === formik.initialValues.image &&\n                  formik.values.description ===\n                    formik.initialValues.description &&\n                  formik.values.brand === formik.initialValues.brand &&\n                  formik.values.category === formik.initialValues.category)\n              }\n              variant=\"contained\"\n              disableElevation\n              className={classes.btn}\n            >\n              CHANGE\n            </Button>\n          </Form>\n        )}\n      </Formik>\n    </Paper>\n  );\n};\n\nexport default UserProductUpdateModalForm;\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _objectSpread from\"/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect,useRef}from'react';import{Link as Rlink}from'react-router-dom';import{makeStyles}from'@material-ui/core';import Avatar from'@material-ui/core/Avatar';import ClickAwayListener from'@material-ui/core/ClickAwayListener';import Grow from'@material-ui/core/Grow';import Paper from'@material-ui/core/Paper';import Popper from'@material-ui/core/Popper';import MenuItem from'@material-ui/core/MenuItem';import MenuList from'@material-ui/core/MenuList';import Link from'@material-ui/core/Link';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{root:{display:'flex'},paper:{marginRight:theme.spacing(2)}};});var MenuDropdown=function MenuDropdown(_ref){var children=_ref.children,userId=_ref.userId,isAdmin=_ref.isAdmin,logoutHandler=_ref.logoutHandler,avatarColor=_ref.avatarColor;var classes=useStyles();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),open=_useState2[0],setOpen=_useState2[1];var anchorRef=useRef(null);var handleToggle=function handleToggle(){setOpen(function(prevOpen){return!prevOpen;});};var handleClose=function handleClose(event){if(anchorRef.current&&anchorRef.current.contains(event.target)){return;}setOpen(false);};function handleListKeyDown(event){if(event.key==='Tab'){event.preventDefault();setOpen(false);}}// return focus to the button when we transitioned from !open -> open\nvar prevOpen=useRef(open);useEffect(function(){if(prevOpen.current===true&&open===false){anchorRef.current.focus();}prevOpen.current=open;},[open]);return/*#__PURE__*/_jsxs(\"div\",{className:classes.root,children:[/*#__PURE__*/_jsx(Avatar,{ref:anchorRef,onClick:handleToggle,style:{backgroundColor:avatarColor},children:children}),/*#__PURE__*/_jsx(Popper,{open:open,anchorEl:anchorRef.current,role:undefined,transition:true,disablePortal:true,children:function children(_ref2){var TransitionProps=_ref2.TransitionProps,placement=_ref2.placement;return/*#__PURE__*/_jsx(Grow,_objectSpread(_objectSpread({},TransitionProps),{},{style:{transformOrigin:placement==='bottom'?'center top':'center bottom'},children:/*#__PURE__*/_jsx(Paper,{children:/*#__PURE__*/_jsx(ClickAwayListener,{onClickAway:handleClose,children:/*#__PURE__*/_jsxs(MenuList,{autoFocusItem:open,id:\"menu-list-grow\",onKeyDown:handleListKeyDown,children:[isAdmin&&/*#__PURE__*/_jsx(MenuItem,{children:/*#__PURE__*/_jsx(Link,{component:Rlink,to:\"/users\",underline:\"none\",onClick:handleClose,className:classes.links,children:\"All Users\"})}),isAdmin&&/*#__PURE__*/_jsx(MenuItem,{children:/*#__PURE__*/_jsx(Link,{component:Rlink,to:\"/products/users/\".concat(userId),underline:\"none\",onClick:handleClose,className:classes.links,children:\"My Products\"})}),/*#__PURE__*/_jsx(MenuItem,{children:/*#__PURE__*/_jsx(Link,{component:Rlink,to:\"/users/\".concat(userId),underline:\"none\",onClick:handleClose,className:classes.links,children:\"Profile\"})}),/*#__PURE__*/_jsx(MenuItem,{onClick:logoutHandler,children:\"Logout\"})]})})})}));}})]});};export default MenuDropdown;","map":{"version":3,"sources":["/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/client/src/components/shared/ui/MenuDropdown.js"],"names":["useState","useEffect","useRef","Link","Rlink","makeStyles","Avatar","ClickAwayListener","Grow","Paper","Popper","MenuItem","MenuList","useStyles","theme","root","display","paper","marginRight","spacing","MenuDropdown","children","userId","isAdmin","logoutHandler","avatarColor","classes","open","setOpen","anchorRef","handleToggle","prevOpen","handleClose","event","current","contains","target","handleListKeyDown","key","preventDefault","focus","backgroundColor","undefined","TransitionProps","placement","transformOrigin","links"],"mappings":"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","sourcesContent":["import { useState, useEffect, useRef } from 'react';\nimport { Link as Rlink } from 'react-router-dom';\n\nimport { makeStyles } from '@material-ui/core';\nimport Avatar from '@material-ui/core/Avatar';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport Grow from '@material-ui/core/Grow';\nimport Paper from '@material-ui/core/Paper';\nimport Popper from '@material-ui/core/Popper';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport Link from '@material-ui/core/Link';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n  },\n  paper: {\n    marginRight: theme.spacing(2),\n  },\n}));\n\nconst MenuDropdown = ({\n  children,\n  userId,\n  isAdmin,\n  logoutHandler,\n  avatarColor,\n}) => {\n  const classes = useStyles();\n  const [open, setOpen] = useState(false);\n  const anchorRef = useRef(null);\n\n  const handleToggle = () => {\n    setOpen((prevOpen) => !prevOpen);\n  };\n\n  const handleClose = (event) => {\n    if (anchorRef.current && anchorRef.current.contains(event.target)) {\n      return;\n    }\n    setOpen(false);\n  };\n\n  function handleListKeyDown(event) {\n    if (event.key === 'Tab') {\n      event.preventDefault();\n      setOpen(false);\n    }\n  }\n\n  // return focus to the button when we transitioned from !open -> open\n  const prevOpen = useRef(open);\n  useEffect(() => {\n    if (prevOpen.current === true && open === false) {\n      anchorRef.current.focus();\n    }\n    prevOpen.current = open;\n  }, [open]);\n\n  return (\n    <div className={classes.root}>\n      <Avatar\n        ref={anchorRef}\n        onClick={handleToggle}\n        style={{ backgroundColor: avatarColor }}\n      >\n        {children}\n      </Avatar>\n      <Popper\n        open={open}\n        anchorEl={anchorRef.current}\n        role={undefined}\n        transition\n        disablePortal\n      >\n        {({ TransitionProps, placement }) => (\n          <Grow\n            {...TransitionProps}\n            style={{\n              transformOrigin:\n                placement === 'bottom' ? 'center top' : 'center bottom',\n            }}\n          >\n            <Paper>\n              <ClickAwayListener onClickAway={handleClose}>\n                <MenuList\n                  autoFocusItem={open}\n                  id=\"menu-list-grow\"\n                  onKeyDown={handleListKeyDown}\n                >\n                  {isAdmin && (\n                    <MenuItem>\n                      <Link\n                        component={Rlink}\n                        to={`/users`}\n                        underline=\"none\"\n                        onClick={handleClose}\n                        className={classes.links}\n                      >\n                        All Users\n                      </Link>\n                    </MenuItem>\n                  )}\n                  {isAdmin && (\n                    <MenuItem>\n                      <Link\n                        component={Rlink}\n                        to={`/products/users/${userId}`}\n                        underline=\"none\"\n                        onClick={handleClose}\n                        className={classes.links}\n                      >\n                        My Products\n                      </Link>\n                    </MenuItem>\n                  )}\n                  <MenuItem>\n                    <Link\n                      component={Rlink}\n                      to={`/users/${userId}`}\n                      underline=\"none\"\n                      onClick={handleClose}\n                      className={classes.links}\n                    >\n                      Profile\n                    </Link>\n                  </MenuItem>\n                  <MenuItem onClick={logoutHandler}>Logout</MenuItem>\n                </MenuList>\n              </ClickAwayListener>\n            </Paper>\n          </Grow>\n        )}\n      </Popper>\n    </div>\n  );\n};\n\nexport default MenuDropdown;\n"]},"metadata":{},"sourceType":"module"}
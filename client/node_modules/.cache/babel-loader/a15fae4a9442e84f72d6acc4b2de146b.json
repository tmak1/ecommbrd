{"ast":null,"code":"import _slicedToArray from\"/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _defineProperty from\"/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import React,{useState,useEffect}from'react';import{useParams}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import AccordianOrder from'../../shared/ui/AccordianOrder';import AlertMessage from'../../shared/ui/AlertMessage';import ErrorAlert from'../../shared/ui/ErrorAlert';import PageHeading from'../../shared/ui/PageHeading';import SkeletonCartBody from'../../shared/ui/skeletons/SkeletonCartBody';import{SkeletonProductDescription,SkeletonPrice}from'../../shared/ui/skeletons/SkeletonComponents';import OrderDetailsSummary from'../components/OrderDetailsSummary';import{addressStringify,paymentMethodStringify}from'../../../helpers';import{getOrderDetails}from'../../../redux/actionCreators/orderActionCreators';import{dateFormatter}from'../../../helpers';import{makeStyles,withStyles}from'@material-ui/core/styles';import Typography from'@material-ui/core/Typography';import Hidden from'@material-ui/core/Hidden';import Grid from'@material-ui/core/Grid';import TableContainer from'@material-ui/core/TableContainer';import Table from'@material-ui/core/Table';import TableHead from'@material-ui/core/TableHead';import TableBody from'@material-ui/core/TableBody';import TableRow from'@material-ui/core/TableRow';import MuiTableCell from'@material-ui/core/TableCell';import Paper from'@material-ui/core/Paper';import CardMedia from'@material-ui/core/CardMedia';import Divider from'@material-ui/core/Divider';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){var _root;return{root:(_root={display:'flex',justifyContent:'space-between'},_defineProperty(_root,theme.breakpoints.down('md'),{justifyContent:'center'}),_defineProperty(_root,theme.breakpoints.down('lg'),{justifyContent:'flex-end'}),_root),tableContainer:{borderBottom:'none',boxShadow:'none'},subRoot:_defineProperty({width:'70%',margin:theme.spacing(6,'auto')},theme.breakpoints.down('lg'),{width:'100%'}),rootTable:{borderBottom:'none',boxShadow:'none'},sections:{margin:theme.spacing(3,0)},paper:{width:theme.spacing(10),height:theme.spacing(7)},media:{width:'100%',height:'100%'}};});var TableCell=withStyles({root:{textAlign:'left',borderBottom:'none',padding:'4px 8px'}})(MuiTableCell);var OrderDetails=function OrderDetails(){var classes=useStyles();var dispatch=useDispatch();var orderId=useParams().oid;var _useSelector=useSelector(function(state){return state.orderDetails;}),loading=_useSelector.loading,error=_useSelector.error,order=_useSelector.order;var _useSelector2=useSelector(function(state){return state.userAuth;}),token=_useSelector2.loggedInUser.token;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),selShipping=_useState2[0],setSelShipping=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),selPayment=_useState4[0],setSelPayment=_useState4[1];var _ref=order||{},newOrderId=_ref.id,buyer=_ref.buyerId,orderItems=_ref.orderItems,shippingAddressId=_ref.shippingAddressId,paymentMethodId=_ref.paymentMethodId,tax=_ref.tax,shippingCost=_ref.shippingCost,total=_ref.total,subTotal=_ref.subTotal,isPaid=_ref.isPaid,paidAt=_ref.paidAt,isDelivered=_ref.isDelivered,deliveredAt=_ref.deliveredAt;useEffect(function(){if(token){dispatch(getOrderDetails(orderId,token));}},[orderId,token,dispatch]);useEffect(function(){if(shippingAddressId){var shipping=addressStringify(shippingAddressId);setSelShipping(shipping);}},[shippingAddressId]);useEffect(function(){if(paymentMethodId){var payment=paymentMethodStringify(paymentMethodId);setSelPayment(payment);}},[paymentMethodId]);return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'10px'},children:[/*#__PURE__*/_jsx(PageHeading,{text:\"ORDER\",paragraph:true,size:\"big\"}),loading?/*#__PURE__*/_jsx(SkeletonPrice,{}):/*#__PURE__*/_jsx(PageHeading,{text:\"#\".concat(newOrderId?newOrderId:''),paragraph:true,size:\"medium\"}),error&&/*#__PURE__*/_jsx(AlertMessage,{message:error,severity:\"error\",variant:\"outlined\"}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,className:classes.root,children:[/*#__PURE__*/_jsxs(Grid,{item:true,md:8,sm:12,xs:12,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.subRoot,children:[loading?/*#__PURE__*/_jsx(SkeletonPrice,{}):/*#__PURE__*/_jsx(Typography,{variant:\"h6\",paragraph:true,children:\"Thank you for your purchase!\"}),loading?/*#__PURE__*/_jsx(SkeletonProductDescription,{}):order&&/*#__PURE__*/_jsx(TableContainer,{className:classes.tableContainer,children:/*#__PURE__*/_jsx(Table,{className:classes.rootTable,children:/*#__PURE__*/_jsxs(TableBody,{children:[/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Name\"}),loading?/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(SkeletonPrice,{width:\"100%\"})}):/*#__PURE__*/_jsx(TableCell,{children:buyer.name})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Email\"}),loading?/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(SkeletonPrice,{width:\"100%\"})}):/*#__PURE__*/_jsx(TableCell,{children:buyer.email})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Billing Address\"}),loading?/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(SkeletonPrice,{width:\"100%\"})}):/*#__PURE__*/_jsx(TableCell,{children:addressStringify(buyer.billingAddress)})]})]})})})]}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsxs(\"div\",{className:classes.sections,children:[/*#__PURE__*/_jsx(PageHeading,{text:\"SHIPPING\",paragraph:true,size:\"small\"}),loading?/*#__PURE__*/_jsx(SkeletonProductDescription,{}):/*#__PURE__*/_jsx(AccordianOrder,{label:selShipping,children:/*#__PURE__*/_jsx(\"div\",{children:!isDelivered?/*#__PURE__*/_jsx(ErrorAlert,{msg:\"Not yet delivered\",margin:\"0px\",padding:\"0px\",putErrorIcon:false,fullWidth:true}):/*#__PURE__*/_jsx(ErrorAlert,{msg:\"Delivered on \".concat(dateFormatter(deliveredAt)),margin:\"0px\",padding:\"0px\",severity:\"success\",putErrorIcon:false,fullWidth:true})})})]}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsxs(\"div\",{className:classes.sections,children:[/*#__PURE__*/_jsx(PageHeading,{text:\"PAYMENT\",paragraph:true,size:\"small\"}),loading?/*#__PURE__*/_jsx(SkeletonProductDescription,{}):/*#__PURE__*/_jsx(AccordianOrder,{label:selPayment,children:/*#__PURE__*/_jsx(\"div\",{children:!isPaid?/*#__PURE__*/_jsx(ErrorAlert,{msg:\"Not yet paid\",margin:\"0px\",padding:\"0px\",putErrorIcon:false,fullWidth:true}):/*#__PURE__*/_jsx(ErrorAlert,{msg:\"Paid on \".concat(dateFormatter(paidAt)),margin:\"0px\",padding:\"0px\",severity:\"success\",putErrorIcon:false,fullWidth:true})})})]}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsxs(\"div\",{className:classes.sections,children:[/*#__PURE__*/_jsx(PageHeading,{text:\"ORDER ITEMS\",paragraph:true,size:\"medium\"}),loading&&/*#__PURE__*/_jsx(SkeletonCartBody,{}),order&&/*#__PURE__*/_jsx(TableContainer,{children:/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(Hidden,{xsDown:true,children:/*#__PURE__*/_jsx(TableCell,{})}),/*#__PURE__*/_jsx(TableCell,{children:\"Name\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Price\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Qty\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Total\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:orderItems===null||orderItems===void 0?void 0:orderItems.map(function(_ref2){var _ref2$productId=_ref2.productId,id=_ref2$productId.id,name=_ref2$productId.name,price=_ref2$productId.price,imageUrl=_ref2$productId.imageUrl,qty=_ref2.qty;return/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(Hidden,{xsDown:true,children:/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Paper,{className:classes.paper,elevation:0,children:/*#__PURE__*/_jsx(CardMedia,{className:classes.media,image:imageUrl||'/images/placeholder.jpg',title:name})})})}),/*#__PURE__*/_jsx(TableCell,{children:name}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsxs(\"strong\",{children:[\"$\",price]})}),/*#__PURE__*/_jsx(TableCell,{children:qty}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(\"strong\",{children:\"$\".concat(total.toFixed(2))})})]},id);})})]})})]})]}),/*#__PURE__*/_jsx(Grid,{item:true,md:4,sm:12,xs:12,children:/*#__PURE__*/_jsx(OrderDetailsSummary,{loading:loading,total:total===null||total===void 0?void 0:total.toFixed(2),tax:tax===null||tax===void 0?void 0:tax.toFixed(2),shippingCost:shippingCost===null||shippingCost===void 0?void 0:shippingCost.toFixed(2),subTotal:subTotal===null||subTotal===void 0?void 0:subTotal.toFixed(2)})})]})]});};export default OrderDetails;","map":{"version":3,"sources":["/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/client/src/components/checkout/pages/OrderDetails.js"],"names":["React","useState","useEffect","useParams","useDispatch","useSelector","AccordianOrder","AlertMessage","ErrorAlert","PageHeading","SkeletonCartBody","SkeletonProductDescription","SkeletonPrice","OrderDetailsSummary","addressStringify","paymentMethodStringify","getOrderDetails","dateFormatter","makeStyles","withStyles","Typography","Hidden","Grid","TableContainer","Table","TableHead","TableBody","TableRow","MuiTableCell","Paper","CardMedia","Divider","useStyles","theme","root","display","justifyContent","breakpoints","down","tableContainer","borderBottom","boxShadow","subRoot","width","margin","spacing","rootTable","sections","paper","height","media","TableCell","textAlign","padding","OrderDetails","classes","dispatch","orderId","oid","state","orderDetails","loading","error","order","userAuth","token","loggedInUser","selShipping","setSelShipping","selPayment","setSelPayment","newOrderId","id","buyer","buyerId","orderItems","shippingAddressId","paymentMethodId","tax","shippingCost","total","subTotal","isPaid","paidAt","isDelivered","deliveredAt","shipping","payment","name","email","billingAddress","map","productId","price","imageUrl","qty","toFixed"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport AccordianOrder from '../../shared/ui/AccordianOrder';\nimport AlertMessage from '../../shared/ui/AlertMessage';\nimport ErrorAlert from '../../shared/ui/ErrorAlert';\nimport PageHeading from '../../shared/ui/PageHeading';\nimport SkeletonCartBody from '../../shared/ui/skeletons/SkeletonCartBody';\nimport {\n  SkeletonProductDescription,\n  SkeletonPrice,\n} from '../../shared/ui/skeletons/SkeletonComponents';\nimport OrderDetailsSummary from '../components/OrderDetailsSummary';\nimport { addressStringify, paymentMethodStringify } from '../../../helpers';\n\nimport { getOrderDetails } from '../../../redux/actionCreators/orderActionCreators';\n\nimport { dateFormatter } from '../../../helpers';\n\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\n\nimport Hidden from '@material-ui/core/Hidden';\nimport Grid from '@material-ui/core/Grid';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport Table from '@material-ui/core/Table';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableRow from '@material-ui/core/TableRow';\nimport MuiTableCell from '@material-ui/core/TableCell';\nimport Paper from '@material-ui/core/Paper';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport Divider from '@material-ui/core/Divider';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    [theme.breakpoints.down('md')]: {\n      justifyContent: 'center',\n    },\n    [theme.breakpoints.down('lg')]: {\n      justifyContent: 'flex-end',\n    },\n  },\n  tableContainer: {\n    borderBottom: 'none',\n    boxShadow: 'none',\n  },\n  subRoot: {\n    width: '70%',\n    margin: theme.spacing(6, 'auto'),\n    [theme.breakpoints.down('lg')]: {\n      width: '100%',\n    },\n  },\n  rootTable: {\n    borderBottom: 'none',\n    boxShadow: 'none',\n  },\n  sections: {\n    margin: theme.spacing(3, 0),\n  },\n  paper: {\n    width: theme.spacing(10),\n    height: theme.spacing(7),\n  },\n  media: {\n    width: '100%',\n    height: '100%',\n  },\n}));\n\nconst TableCell = withStyles({\n  root: {\n    textAlign: 'left',\n    borderBottom: 'none',\n    padding: '4px 8px',\n  },\n})(MuiTableCell);\n\nconst OrderDetails = () => {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const orderId = useParams().oid;\n  const { loading, error, order } = useSelector((state) => state.orderDetails);\n  const {\n    loggedInUser: { token },\n  } = useSelector((state) => state.userAuth);\n  const [selShipping, setSelShipping] = useState(null);\n  const [selPayment, setSelPayment] = useState(null);\n  const {\n    id: newOrderId,\n    buyerId: buyer,\n    orderItems,\n    shippingAddressId,\n    paymentMethodId,\n    tax,\n    shippingCost,\n    total,\n    subTotal,\n    isPaid,\n    paidAt,\n    isDelivered,\n    deliveredAt,\n  } = order || {};\n\n  useEffect(() => {\n    if (token) {\n      dispatch(getOrderDetails(orderId, token));\n    }\n  }, [orderId, token, dispatch]);\n  useEffect(() => {\n    if (shippingAddressId) {\n      const shipping = addressStringify(shippingAddressId);\n      setSelShipping(shipping);\n    }\n  }, [shippingAddressId]);\n\n  useEffect(() => {\n    if (paymentMethodId) {\n      const payment = paymentMethodStringify(paymentMethodId);\n      setSelPayment(payment);\n    }\n  }, [paymentMethodId]);\n\n  return (\n    <div style={{ padding: '10px' }}>\n      <PageHeading text=\"ORDER\" paragraph size=\"big\" />\n      {loading ? (\n        <SkeletonPrice />\n      ) : (\n        <PageHeading\n          text={`#${newOrderId ? newOrderId : ''}`}\n          paragraph\n          size=\"medium\"\n        />\n      )}\n      {error && (\n        <AlertMessage message={error} severity=\"error\" variant=\"outlined\" />\n      )}\n      <Grid container spacing={2} className={classes.root}>\n        <Grid item md={8} sm={12} xs={12}>\n          <div className={classes.subRoot}>\n            {loading ? (\n              <SkeletonPrice />\n            ) : (\n              <Typography variant=\"h6\" paragraph>\n                Thank you for your purchase!\n              </Typography>\n            )}\n            {loading ? (\n              <SkeletonProductDescription />\n            ) : (\n              order && (\n                <TableContainer className={classes.tableContainer}>\n                  <Table className={classes.rootTable}>\n                    <TableBody>\n                      <TableRow>\n                        <TableCell>Name</TableCell>\n                        {loading ? (\n                          <TableCell>\n                            <SkeletonPrice width=\"100%\" />\n                          </TableCell>\n                        ) : (\n                          <TableCell>{buyer.name}</TableCell>\n                        )}\n                      </TableRow>\n                      <TableRow>\n                        <TableCell>Email</TableCell>\n                        {loading ? (\n                          <TableCell>\n                            <SkeletonPrice width=\"100%\" />\n                          </TableCell>\n                        ) : (\n                          <TableCell>{buyer.email}</TableCell>\n                        )}\n                      </TableRow>\n                      <TableRow>\n                        <TableCell>Billing Address</TableCell>\n                        {loading ? (\n                          <TableCell>\n                            <SkeletonPrice width=\"100%\" />\n                          </TableCell>\n                        ) : (\n                          <TableCell>\n                            {addressStringify(buyer.billingAddress)}\n                          </TableCell>\n                        )}\n                      </TableRow>\n                    </TableBody>\n                  </Table>\n                </TableContainer>\n              )\n            )}\n          </div>\n          <Divider />\n          <div className={classes.sections}>\n            <PageHeading text=\"SHIPPING\" paragraph size=\"small\" />\n            {loading ? (\n              <SkeletonProductDescription />\n            ) : (\n              <AccordianOrder label={selShipping}>\n                <div>\n                  {!isDelivered ? (\n                    <ErrorAlert\n                      msg=\"Not yet delivered\"\n                      margin=\"0px\"\n                      padding=\"0px\"\n                      putErrorIcon={false}\n                      fullWidth\n                    />\n                  ) : (\n                    <ErrorAlert\n                      msg={`Delivered on ${dateFormatter(deliveredAt)}`}\n                      margin=\"0px\"\n                      padding=\"0px\"\n                      severity=\"success\"\n                      putErrorIcon={false}\n                      fullWidth\n                    />\n                  )}\n                </div>\n              </AccordianOrder>\n            )}\n          </div>\n          <Divider />\n          <div className={classes.sections}>\n            <PageHeading text=\"PAYMENT\" paragraph size=\"small\" />\n            {loading ? (\n              <SkeletonProductDescription />\n            ) : (\n              <AccordianOrder label={selPayment}>\n                <div>\n                  {!isPaid ? (\n                    <ErrorAlert\n                      msg=\"Not yet paid\"\n                      margin=\"0px\"\n                      padding=\"0px\"\n                      putErrorIcon={false}\n                      fullWidth\n                    />\n                  ) : (\n                    <ErrorAlert\n                      msg={`Paid on ${dateFormatter(paidAt)}`}\n                      margin=\"0px\"\n                      padding=\"0px\"\n                      severity=\"success\"\n                      putErrorIcon={false}\n                      fullWidth\n                    />\n                  )}\n                </div>\n              </AccordianOrder>\n            )}\n          </div>\n          <Divider />\n          <div className={classes.sections}>\n            <PageHeading text=\"ORDER ITEMS\" paragraph size=\"medium\" />\n            {loading && <SkeletonCartBody />}\n            {order && (\n              <TableContainer>\n                <Table>\n                  <TableHead>\n                    <TableRow>\n                      <Hidden xsDown>\n                        <TableCell></TableCell>\n                      </Hidden>\n                      <TableCell>Name</TableCell>\n                      <TableCell>Price</TableCell>\n                      <TableCell>Qty</TableCell>\n                      <TableCell>Total</TableCell>\n                    </TableRow>\n                  </TableHead>\n                  <TableBody>\n                    {orderItems?.map(\n                      ({ productId: { id, name, price, imageUrl }, qty }) => {\n                        return (\n                          <TableRow key={id}>\n                            <Hidden xsDown>\n                              <TableCell>\n                                <Paper className={classes.paper} elevation={0}>\n                                  <CardMedia\n                                    className={classes.media}\n                                    image={\n                                      imageUrl || '/images/placeholder.jpg'\n                                    }\n                                    title={name}\n                                  />\n                                </Paper>\n                              </TableCell>\n                            </Hidden>\n                            <TableCell>{name}</TableCell>\n                            <TableCell>\n                              <strong>${price}</strong>\n                            </TableCell>\n                            <TableCell>{qty}</TableCell>\n                            <TableCell>\n                              <strong>{`$${total.toFixed(2)}`}</strong>\n                            </TableCell>\n                          </TableRow>\n                        );\n                      }\n                    )}\n                  </TableBody>\n                </Table>\n              </TableContainer>\n            )}\n          </div>\n        </Grid>\n        <Grid item md={4} sm={12} xs={12}>\n          <OrderDetailsSummary\n            loading={loading}\n            total={total?.toFixed(2)}\n            tax={tax?.toFixed(2)}\n            shippingCost={shippingCost?.toFixed(2)}\n            subTotal={subTotal?.toFixed(2)}\n          />\n        </Grid>\n      </Grid>\n    </div>\n  );\n};\n\nexport default OrderDetails;\n"]},"metadata":{},"sourceType":"module"}
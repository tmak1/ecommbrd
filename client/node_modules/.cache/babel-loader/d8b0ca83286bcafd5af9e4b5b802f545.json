{"ast":null,"code":"import _regeneratorRuntime from\"/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{ADD_TO_CART_REQUEST,ADD_TO_CART_SUCCESS,ADD_TO_CART_FAILURE,REMOVE_FROM_CART}from'../actions/cartActions';import{sendRequest}from'../../helpers';var clearLocalStorage=function clearLocalStorage(props){var shoppingapp=localStorage.getItem('shoppingapp');if(shoppingapp){shoppingapp=JSON.parse(shoppingapp);if(shoppingapp[props]){delete shoppingapp[props];}return localStorage.setItem('shoppingapp',JSON.stringify(shoppingapp));}};var updateLocalStorage=function updateLocalStorage(cartItems){var shoppingapp=localStorage.getItem('shoppingapp');if(shoppingapp){shoppingapp=JSON.parse(shoppingapp);if(cartItems.length>0){localStorage.setItem('shoppingapp',JSON.stringify(_objectSpread(_objectSpread({},shoppingapp),{},{cartItems:cartItems})));return;}delete shoppingapp.cartItems;return localStorage.setItem('shoppingapp',JSON.stringify(shoppingapp));}if(cartItems.length>0){localStorage.setItem('shoppingapp',JSON.stringify({cartItems:cartItems}));}};export var addToCart=function addToCart(productId,qty){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch,getState){var _yield$sendRequest,error,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;dispatch({type:ADD_TO_CART_REQUEST});_context.next=4;return sendRequest(\"\".concat(process.env.REACT_APP_API_URL,\"/products/\").concat(productId));case 4:_yield$sendRequest=_context.sent;error=_yield$sendRequest.error;data=_yield$sendRequest.data;if(!error){_context.next=9;break;}return _context.abrupt(\"return\",dispatch({type:ADD_TO_CART_FAILURE,payload:error}));case 9:dispatch({type:ADD_TO_CART_SUCCESS,payload:_objectSpread(_objectSpread({},data),{},{qty:qty})});updateLocalStorage(getState().cart.cartItems);_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 16:case\"end\":return _context.stop();}}},_callee,null,[[0,13]]);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();};export var removeFromCart=function removeFromCart(productId){return function(dispatch,getState){dispatch({type:REMOVE_FROM_CART,payload:productId});updateLocalStorage(getState().cart.cartItems);};};export var clearCart=function clearCart(){return function(dispatch,getState){getState().cart.cartItems.forEach(function(item){dispatch({type:REMOVE_FROM_CART,payload:item.id});});clearLocalStorage('cartItems');};};","map":{"version":3,"sources":["/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/client/src/redux/actionCreators/cartActionCreators.js"],"names":["ADD_TO_CART_REQUEST","ADD_TO_CART_SUCCESS","ADD_TO_CART_FAILURE","REMOVE_FROM_CART","sendRequest","clearLocalStorage","props","shoppingapp","localStorage","getItem","JSON","parse","setItem","stringify","updateLocalStorage","cartItems","length","addToCart","productId","qty","dispatch","getState","type","process","env","REACT_APP_API_URL","error","data","payload","cart","console","log","removeFromCart","clearCart","forEach","item","id"],"mappings":"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","sourcesContent":["import {\n  ADD_TO_CART_REQUEST,\n  ADD_TO_CART_SUCCESS,\n  ADD_TO_CART_FAILURE,\n  REMOVE_FROM_CART,\n} from '../actions/cartActions';\nimport { sendRequest } from '../../helpers';\n\nconst clearLocalStorage = (props) => {\n  let shoppingapp = localStorage.getItem('shoppingapp');\n  if (shoppingapp) {\n    shoppingapp = JSON.parse(shoppingapp);\n    if (shoppingapp[props]) {\n      delete shoppingapp[props];\n    }\n    return localStorage.setItem('shoppingapp', JSON.stringify(shoppingapp));\n  }\n};\n\nconst updateLocalStorage = (cartItems) => {\n  let shoppingapp = localStorage.getItem('shoppingapp');\n  if (shoppingapp) {\n    shoppingapp = JSON.parse(shoppingapp);\n    if (cartItems.length > 0) {\n      localStorage.setItem(\n        'shoppingapp',\n        JSON.stringify({ ...shoppingapp, cartItems })\n      );\n      return;\n    }\n    delete shoppingapp.cartItems;\n    return localStorage.setItem('shoppingapp', JSON.stringify(shoppingapp));\n  }\n  if (cartItems.length > 0) {\n    localStorage.setItem('shoppingapp', JSON.stringify({ cartItems }));\n  }\n};\n\nexport const addToCart = (productId, qty) => async (dispatch, getState) => {\n  try {\n    dispatch({ type: ADD_TO_CART_REQUEST });\n    const { error, data } = await sendRequest(\n      `${process.env.REACT_APP_API_URL}/products/${productId}`\n    );\n    if (error) {\n      return dispatch({ type: ADD_TO_CART_FAILURE, payload: error });\n    }\n    dispatch({\n      type: ADD_TO_CART_SUCCESS,\n      payload: { ...data, qty },\n    });\n    updateLocalStorage(getState().cart.cartItems);\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nexport const removeFromCart = (productId) => (dispatch, getState) => {\n  dispatch({ type: REMOVE_FROM_CART, payload: productId });\n  updateLocalStorage(getState().cart.cartItems);\n};\n\nexport const clearCart = () => (dispatch, getState) => {\n  getState().cart.cartItems.forEach((item) => {\n    dispatch({ type: REMOVE_FROM_CART, payload: item.id });\n  });\n  clearLocalStorage('cartItems');\n};\n"]},"metadata":{},"sourceType":"module"}
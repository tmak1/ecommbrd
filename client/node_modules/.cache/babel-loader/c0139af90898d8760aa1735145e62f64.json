{"ast":null,"code":"import _regeneratorRuntime from\"/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import firebase from'firebase/app';import'firebase/storage';var initializeFirebase=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(token){var res,firebaseConfig;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;if(firebase.apps.length){_context.next=11;break;}_context.next=4;return fetch(\"\".concat(process.env.REACT_APP_API_URL,\"/products/firebaseConfig\"),{headers:{Authorization:\"Bearer \".concat(token)}});case 4:res=_context.sent;_context.next=7;return res.json();case 7:firebaseConfig=_context.sent;firebase.initializeApp(firebaseConfig);_context.next=12;break;case 11:firebase.app();case 12:return _context.abrupt(\"return\",firebase);case 15:_context.prev=15;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 18:case\"end\":return _context.stop();}}},_callee,null,[[0,15]]);}));return function initializeFirebase(_x){return _ref.apply(this,arguments);};}();export default initializeFirebase;// const firebaseConfig = {\n//   apiKey: 'secret',\n//   authDomain: '<your-auth-domain>',\n//   databaseURL: 'https://brdecomm-c1d32.firebaseio.com/images',\n//   storageBucket: 'gs://brdecomm-c1d32.appspot.com',\n// };","map":{"version":3,"sources":["/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/client/src/firebase.js"],"names":["firebase","initializeFirebase","token","apps","length","fetch","process","env","REACT_APP_API_URL","headers","Authorization","res","json","firebaseConfig","initializeApp","app","console","log"],"mappings":"6UAAA,MAAOA,CAAAA,QAAP,KAAqB,cAArB,CACA,MAAO,kBAAP,CAEA,GAAMC,CAAAA,kBAAkB,0FAAG,iBAAOC,KAAP,4JAElBF,QAAQ,CAACG,IAAT,CAAcC,MAFI,gDAGHC,CAAAA,KAAK,WAClBC,OAAO,CAACC,GAAR,CAAYC,iBADM,6BAErB,CACEC,OAAO,CAAE,CACPC,aAAa,kBAAYR,KAAZ,CADN,CADX,CAFqB,CAHF,QAGfS,GAHe,qCAWQA,CAAAA,GAAG,CAACC,IAAJ,EAXR,QAWfC,cAXe,eAYrBb,QAAQ,CAACc,aAAT,CAAuBD,cAAvB,EAZqB,+BAcrBb,QAAQ,CAACe,GAAT,GAdqB,wCAgBhBf,QAhBgB,4DAkBvBgB,OAAO,CAACC,GAAR,cAlBuB,qEAAH,kBAAlBhB,CAAAA,kBAAkB,4CAAxB,CAsBA,cAAeA,CAAAA,kBAAf,CAEA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import firebase from 'firebase/app';\nimport 'firebase/storage';\n\nconst initializeFirebase = async (token) => {\n  try {\n    if (!firebase.apps.length) {\n      const res = await fetch(\n        `${process.env.REACT_APP_API_URL}/products/firebaseConfig`,\n        {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        }\n      );\n      const firebaseConfig = await res.json();\n      firebase.initializeApp(firebaseConfig);\n    } else {\n      firebase.app();\n    }\n    return firebase;\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nexport default initializeFirebase;\n\n// const firebaseConfig = {\n//   apiKey: 'secret',\n//   authDomain: '<your-auth-domain>',\n//   databaseURL: 'https://brdecomm-c1d32.firebaseio.com/images',\n//   storageBucket: 'gs://brdecomm-c1d32.appspot.com',\n// };\n"]},"metadata":{},"sourceType":"module"}
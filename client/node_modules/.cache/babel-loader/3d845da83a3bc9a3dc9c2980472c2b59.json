{"ast":null,"code":"import _slicedToArray from\"/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _defineProperty from\"/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import React,{useState,useEffect}from'react';import{useLocation,useHistory}from'react-router-dom';import{useSelector}from'react-redux';import SignupForm from'../components/SignupForm';import LoginForm from'../components/LoginForm';import LoadingLinear from'../../shared/ui/LoadingLinear';import AlertMessage from'../../shared/ui/AlertMessage';import{makeStyles}from'@material-ui/core/styles';import Paper from'@material-ui/core/Paper';import Box from'@material-ui/core/Box';import Tabs from'@material-ui/core/Tabs';import Tab from'@material-ui/core/Tab';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{root:_defineProperty({width:'30%',margin:'30px auto',minWidth:'350px'},theme.breakpoints.down('xs'),{width:'90%'}),rootBox:{width:'100%',margin:'7px auto',textAlign:'center'}};});var TabPanel=function TabPanel(_ref){var children=_ref.children,value=_ref.value,index=_ref.index;var classes=useStyles();return/*#__PURE__*/_jsx(Box,{hidden:value!==index,className:classes.rootBox,children:value===index?children:null});};var Auth=function Auth(){var classes=useStyles();var _useState=useState(0),_useState2=_slicedToArray(_useState,2),value=_useState2[0],setValue=_useState2[1];var history=useHistory();var location=useLocation();var search=new URLSearchParams(location.search);var redirectQuery=search.has('redirect')?search.get('redirect'):null;var _useSelector=useSelector(function(state){return state.userAuth;}),loading=_useSelector.loading,error=_useSelector.error,loggedInUser=_useSelector.loggedInUser;useEffect(function(){if(redirectQuery&&loggedInUser){history.push(\"/\".concat(redirectQuery));}},[redirectQuery,loggedInUser,history]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:classes.root,children:[/*#__PURE__*/_jsx(Paper,{children:/*#__PURE__*/_jsxs(Tabs,{value:value,onChange:function onChange(event,val){return setValue(val);},indicatorColor:\"primary\",textColor:\"primary\",variant:\"fullWidth\",children:[/*#__PURE__*/_jsx(Tab,{label:\"Signin\"}),/*#__PURE__*/_jsx(Tab,{label:\"Signup\"})]})}),loading&&/*#__PURE__*/_jsx(LoadingLinear,{oneBarOnly:true}),error&&/*#__PURE__*/_jsx(AlertMessage,{message:error,severity:\"error\",variant:\"outlined\"}),/*#__PURE__*/_jsx(TabPanel,{value:value,index:0,children:/*#__PURE__*/_jsx(LoginForm,{loggedIn:!!loggedInUser})}),/*#__PURE__*/_jsx(TabPanel,{value:value,index:1,children:/*#__PURE__*/_jsx(SignupForm,{loggedIn:!!loggedInUser})})]})});};export default Auth;","map":{"version":3,"sources":["/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/client/src/components/users/pages/Auth.js"],"names":["React","useState","useEffect","useLocation","useHistory","useSelector","SignupForm","LoginForm","LoadingLinear","AlertMessage","makeStyles","Paper","Box","Tabs","Tab","useStyles","theme","root","width","margin","minWidth","breakpoints","down","rootBox","textAlign","TabPanel","children","value","index","classes","Auth","setValue","history","location","search","URLSearchParams","redirectQuery","has","get","state","userAuth","loading","error","loggedInUser","push","event","val"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useLocation, useHistory } from 'react-router-dom';\nimport { useSelector } from 'react-redux';\n\nimport SignupForm from '../components/SignupForm';\nimport LoginForm from '../components/LoginForm';\nimport LoadingLinear from '../../shared/ui/LoadingLinear';\nimport AlertMessage from '../../shared/ui/AlertMessage';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport Box from '@material-ui/core/Box';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '30%',\n    margin: '30px auto',\n    minWidth: '350px',\n    [theme.breakpoints.down('xs')]: {\n      width: '90%',\n    },\n  },\n  rootBox: {\n    width: '100%',\n    margin: '7px auto',\n    textAlign: 'center',\n  },\n}));\n\nconst TabPanel = ({ children, value, index }) => {\n  const classes = useStyles();\n  return (\n    <Box hidden={value !== index} className={classes.rootBox}>\n      {value === index ? children : null}\n    </Box>\n  );\n};\n\nconst Auth = () => {\n  const classes = useStyles();\n  const [value, setValue] = useState(0);\n  const history = useHistory();\n  const location = useLocation();\n  const search = new URLSearchParams(location.search);\n  const redirectQuery = search.has('redirect') ? search.get('redirect') : null;\n\n  const { loading, error, loggedInUser } = useSelector(\n    (state) => state.userAuth\n  );\n\n  useEffect(() => {\n    if (redirectQuery && loggedInUser) {\n      history.push(`/${redirectQuery}`);\n    }\n  }, [redirectQuery, loggedInUser, history]);\n\n  return (\n    <>\n      <div className={classes.root}>\n        <Paper>\n          <Tabs\n            value={value}\n            onChange={(event, val) => setValue(val)}\n            indicatorColor=\"primary\"\n            textColor=\"primary\"\n            variant=\"fullWidth\"\n          >\n            <Tab label=\"Signin\" />\n            <Tab label=\"Signup\" />\n          </Tabs>\n        </Paper>\n        {loading && <LoadingLinear oneBarOnly />}\n        {error && (\n          <AlertMessage message={error} severity=\"error\" variant=\"outlined\" />\n        )}\n        <TabPanel value={value} index={0}>\n          <LoginForm loggedIn={!!loggedInUser} />\n        </TabPanel>\n        <TabPanel value={value} index={1}>\n          <SignupForm loggedIn={!!loggedInUser} />\n        </TabPanel>\n      </div>\n    </>\n  );\n};\n\nexport default Auth;\n"]},"metadata":{},"sourceType":"module"}
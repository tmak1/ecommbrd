{"ast":null,"code":"import _objectSpread from\"/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _defineProperty from\"/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import React,{useState,useEffect}from'react';import Shipping from'./Shipping';import Payment from'./Payment';import PlaceOrder from'./PlaceOrder';import PageHeading from'../../shared/ui/PageHeading';import{validateShipping,validatePayment}from'../../../redux/actionCreators/checkoutActionCreators';import{makeStyles}from'@material-ui/core/styles';import CheckoutStepper from'../../shared/ui/CheckoutStepper';import{useDispatch,useSelector}from'react-redux';import{useCallback}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{root:_defineProperty({},theme.breakpoints.down('xs'),{display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center'})};});var Checkout=function Checkout(){var classes=useStyles();var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.checkout;}),shippingError=_useSelector.shippingError,paymentError=_useSelector.paymentError,selectedshipping=_useSelector.selectedshipping,selectedpayment=_useSelector.selectedpayment;var _useState=useState([{label:'shipping',comp:/*#__PURE__*/_jsx(Shipping,{validateStep:handleShippingStepDone}),done:false},{label:'payment',comp:/*#__PURE__*/_jsx(Payment,{validateStep:handlePaymentStepDone}),done:false},{label:'place order',comp:/*#__PURE__*/_jsx(PlaceOrder,{}),done:false}]),_useState2=_slicedToArray(_useState,2),steps=_useState2[0],setSteps=_useState2[1];var modifyShipping=useCallback(function(){var noSelection=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var done;if(noSelection){done=false;}else{done=!shippingError&&!!selectedshipping;}setSteps(function(prevState){return[_objectSpread(_objectSpread({},prevState.find(function(step){return step.label==='shipping';})),{},{done:done})].concat(_toConsumableArray(prevState.slice(1)));});},[selectedshipping,shippingError]);var modifyPayment=useCallback(function(){var noSelection=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var done;if(noSelection){done=false;}else{done=!paymentError&&!!selectedpayment;}setSteps(function(prevState){return[prevState.slice(0,1)[0],_objectSpread(_objectSpread({},prevState.find(function(step){return step.label==='payment';})),{},{done:done}),prevState.slice(2)[0]];});},[selectedpayment,paymentError]);function handleShippingStepDone(shipping){if(!shipping||shipping&&Object.keys(shipping).length<=0){return modifyShipping(true);}dispatch(validateShipping(shipping,['suburb']));}function handlePaymentStepDone(payment){if(!payment||payment&&Object.keys(payment).length<=0){return modifyPayment(true);}dispatch(validatePayment(payment,['nameOnCard','cardNumber','expiryMonth','expiryYear']));}useEffect(function(){modifyShipping();},[shippingError,selectedshipping,modifyShipping]);useEffect(function(){modifyPayment();},[paymentError,selectedpayment,modifyPayment]);// console.log(steps);\nreturn/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(PageHeading,{text:\"CHECKOUT\",gutterBottom:true}),/*#__PURE__*/_jsx(\"div\",{className:classes.root,children:/*#__PURE__*/_jsx(CheckoutStepper,{steps:steps})})]});};export default Checkout;","map":{"version":3,"sources":["/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/client/src/components/checkout/pages/Checkout.js"],"names":["React","useState","useEffect","Shipping","Payment","PlaceOrder","PageHeading","validateShipping","validatePayment","makeStyles","CheckoutStepper","useDispatch","useSelector","useCallback","useStyles","theme","root","breakpoints","down","display","flexDirection","alignItems","justifyContent","Checkout","classes","dispatch","state","checkout","shippingError","paymentError","selectedshipping","selectedpayment","label","comp","handleShippingStepDone","done","handlePaymentStepDone","steps","setSteps","modifyShipping","noSelection","prevState","find","step","slice","modifyPayment","shipping","Object","keys","length","payment"],"mappings":"yqBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CAEA,MAAOC,CAAAA,QAAP,KAAqB,YAArB,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CACA,MAAOC,CAAAA,UAAP,KAAuB,cAAvB,CACA,MAAOC,CAAAA,WAAP,KAAwB,6BAAxB,CAEA,OACEC,gBADF,CAEEC,eAFF,KAGO,sDAHP,CAKA,OAASC,UAAT,KAA2B,0BAA3B,CACA,MAAOC,CAAAA,eAAP,KAA4B,iCAA5B,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,WAAT,KAA4B,OAA5B,C,6IAEA,GAAMC,CAAAA,SAAS,CAAGL,UAAU,CAAC,SAACM,KAAD,QAAY,CACvCC,IAAI,oBACDD,KAAK,CAACE,WAAN,CAAkBC,IAAlB,CAAuB,IAAvB,CADC,CAC8B,CAC9BC,OAAO,CAAE,MADqB,CAE9BC,aAAa,CAAE,QAFe,CAG9BC,UAAU,CAAE,QAHkB,CAI9BC,cAAc,CAAE,QAJc,CAD9B,CADmC,CAAZ,EAAD,CAA5B,CAWA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CACrB,GAAMC,CAAAA,OAAO,CAAGV,SAAS,EAAzB,CACA,GAAMW,CAAAA,QAAQ,CAAGd,WAAW,EAA5B,CACA,iBACEC,WAAW,CAAC,SAACc,KAAD,QAAWA,CAAAA,KAAK,CAACC,QAAjB,EAAD,CADb,CAAQC,aAAR,cAAQA,aAAR,CAAuBC,YAAvB,cAAuBA,YAAvB,CAAqCC,gBAArC,cAAqCA,gBAArC,CAAuDC,eAAvD,cAAuDA,eAAvD,CAEA,cAA0B9B,QAAQ,CAAC,CACjC,CACE+B,KAAK,CAAE,UADT,CAEEC,IAAI,cAAE,KAAC,QAAD,EAAU,YAAY,CAAEC,sBAAxB,EAFR,CAGEC,IAAI,CAAE,KAHR,CADiC,CAMjC,CACEH,KAAK,CAAE,SADT,CAEEC,IAAI,cAAE,KAAC,OAAD,EAAS,YAAY,CAAEG,qBAAvB,EAFR,CAGED,IAAI,CAAE,KAHR,CANiC,CAWjC,CACEH,KAAK,CAAE,aADT,CAEEC,IAAI,cAAE,KAAC,UAAD,IAFR,CAGEE,IAAI,CAAE,KAHR,CAXiC,CAAD,CAAlC,wCAAOE,KAAP,eAAcC,QAAd,eAkBA,GAAMC,CAAAA,cAAc,CAAG1B,WAAW,CAChC,UAAyB,IAAxB2B,CAAAA,WAAwB,2DAAV,KAAU,CACvB,GAAIL,CAAAA,IAAJ,CACA,GAAIK,WAAJ,CAAiB,CACfL,IAAI,CAAG,KAAP,CACD,CAFD,IAEO,CACLA,IAAI,CAAG,CAACP,aAAD,EAAkB,CAAC,CAACE,gBAA3B,CACD,CACDQ,QAAQ,CAAC,SAACG,SAAD,wCAEFA,SAAS,CAACC,IAAV,CAAe,SAACC,IAAD,QAAUA,CAAAA,IAAI,CAACX,KAAL,GAAe,UAAzB,EAAf,CAFE,MAGLG,IAAI,CAAJA,IAHK,8BAKJM,SAAS,CAACG,KAAV,CAAgB,CAAhB,CALI,IAAD,CAAR,CAOD,CAf+B,CAgBhC,CAACd,gBAAD,CAAmBF,aAAnB,CAhBgC,CAAlC,CAkBA,GAAMiB,CAAAA,aAAa,CAAGhC,WAAW,CAC/B,UAAyB,IAAxB2B,CAAAA,WAAwB,2DAAV,KAAU,CACvB,GAAIL,CAAAA,IAAJ,CACA,GAAIK,WAAJ,CAAiB,CACfL,IAAI,CAAG,KAAP,CACD,CAFD,IAEO,CACLA,IAAI,CAAG,CAACN,YAAD,EAAiB,CAAC,CAACE,eAA1B,CACD,CACDO,QAAQ,CAAC,SAACG,SAAD,QAAe,CACtBA,SAAS,CAACG,KAAV,CAAgB,CAAhB,CAAmB,CAAnB,EAAsB,CAAtB,CADsB,gCAGjBH,SAAS,CAACC,IAAV,CAAe,SAACC,IAAD,QAAUA,CAAAA,IAAI,CAACX,KAAL,GAAe,SAAzB,EAAf,CAHiB,MAIpBG,IAAI,CAAJA,IAJoB,GAMtBM,SAAS,CAACG,KAAV,CAAgB,CAAhB,EAAmB,CAAnB,CANsB,CAAf,EAAD,CAAR,CAQD,CAhB8B,CAiB/B,CAACb,eAAD,CAAkBF,YAAlB,CAjB+B,CAAjC,CAmBA,QAASK,CAAAA,sBAAT,CAAgCY,QAAhC,CAA0C,CACxC,GAAI,CAACA,QAAD,EAAcA,QAAQ,EAAIC,MAAM,CAACC,IAAP,CAAYF,QAAZ,EAAsBG,MAAtB,EAAgC,CAA9D,CAAkE,CAChE,MAAOV,CAAAA,cAAc,CAAC,IAAD,CAArB,CACD,CACDd,QAAQ,CAAClB,gBAAgB,CAACuC,QAAD,CAAW,CAAC,QAAD,CAAX,CAAjB,CAAR,CACD,CACD,QAASV,CAAAA,qBAAT,CAA+Bc,OAA/B,CAAwC,CACtC,GAAI,CAACA,OAAD,EAAaA,OAAO,EAAIH,MAAM,CAACC,IAAP,CAAYE,OAAZ,EAAqBD,MAArB,EAA+B,CAA3D,CAA+D,CAC7D,MAAOJ,CAAAA,aAAa,CAAC,IAAD,CAApB,CACD,CACDpB,QAAQ,CACNjB,eAAe,CAAC0C,OAAD,CAAU,CACvB,YADuB,CAEvB,YAFuB,CAGvB,aAHuB,CAIvB,YAJuB,CAAV,CADT,CAAR,CAQD,CACDhD,SAAS,CAAC,UAAM,CACdqC,cAAc,GACf,CAFQ,CAEN,CAACX,aAAD,CAAgBE,gBAAhB,CAAkCS,cAAlC,CAFM,CAAT,CAIArC,SAAS,CAAC,UAAM,CACd2C,aAAa,GACd,CAFQ,CAEN,CAAChB,YAAD,CAAeE,eAAf,CAAgCc,aAAhC,CAFM,CAAT,CAGA;AACA,mBACE,wCACE,KAAC,WAAD,EAAa,IAAI,CAAC,UAAlB,CAA6B,YAAY,KAAzC,EADF,cAEE,YAAK,SAAS,CAAErB,OAAO,CAACR,IAAxB,uBACE,KAAC,eAAD,EAAiB,KAAK,CAAEqB,KAAxB,EADF,EAFF,GADF,CAQD,CA/FD,CAiGA,cAAed,CAAAA,QAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\n\nimport Shipping from './Shipping';\nimport Payment from './Payment';\nimport PlaceOrder from './PlaceOrder';\nimport PageHeading from '../../shared/ui/PageHeading';\n\nimport {\n  validateShipping,\n  validatePayment,\n} from '../../../redux/actionCreators/checkoutActionCreators';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport CheckoutStepper from '../../shared/ui/CheckoutStepper';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useCallback } from 'react';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    [theme.breakpoints.down('xs')]: {\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      justifyContent: 'center',\n    },\n  },\n}));\n\nconst Checkout = () => {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const { shippingError, paymentError, selectedshipping, selectedpayment } =\n    useSelector((state) => state.checkout);\n  const [steps, setSteps] = useState([\n    {\n      label: 'shipping',\n      comp: <Shipping validateStep={handleShippingStepDone} />,\n      done: false,\n    },\n    {\n      label: 'payment',\n      comp: <Payment validateStep={handlePaymentStepDone} />,\n      done: false,\n    },\n    {\n      label: 'place order',\n      comp: <PlaceOrder />,\n      done: false,\n    },\n  ]);\n\n  const modifyShipping = useCallback(\n    (noSelection = false) => {\n      let done;\n      if (noSelection) {\n        done = false;\n      } else {\n        done = !shippingError && !!selectedshipping;\n      }\n      setSteps((prevState) => [\n        {\n          ...prevState.find((step) => step.label === 'shipping'),\n          done,\n        },\n        ...prevState.slice(1),\n      ]);\n    },\n    [selectedshipping, shippingError]\n  );\n  const modifyPayment = useCallback(\n    (noSelection = false) => {\n      let done;\n      if (noSelection) {\n        done = false;\n      } else {\n        done = !paymentError && !!selectedpayment;\n      }\n      setSteps((prevState) => [\n        prevState.slice(0, 1)[0],\n        {\n          ...prevState.find((step) => step.label === 'payment'),\n          done,\n        },\n        prevState.slice(2)[0],\n      ]);\n    },\n    [selectedpayment, paymentError]\n  );\n  function handleShippingStepDone(shipping) {\n    if (!shipping || (shipping && Object.keys(shipping).length <= 0)) {\n      return modifyShipping(true);\n    }\n    dispatch(validateShipping(shipping, ['suburb']));\n  }\n  function handlePaymentStepDone(payment) {\n    if (!payment || (payment && Object.keys(payment).length <= 0)) {\n      return modifyPayment(true);\n    }\n    dispatch(\n      validatePayment(payment, [\n        'nameOnCard',\n        'cardNumber',\n        'expiryMonth',\n        'expiryYear',\n      ])\n    );\n  }\n  useEffect(() => {\n    modifyShipping();\n  }, [shippingError, selectedshipping, modifyShipping]);\n\n  useEffect(() => {\n    modifyPayment();\n  }, [paymentError, selectedpayment, modifyPayment]);\n  // console.log(steps);\n  return (\n    <>\n      <PageHeading text=\"CHECKOUT\" gutterBottom />\n      <div className={classes.root}>\n        <CheckoutStepper steps={steps} />\n      </div>\n    </>\n  );\n};\n\nexport default Checkout;\n"]},"metadata":{},"sourceType":"module"}
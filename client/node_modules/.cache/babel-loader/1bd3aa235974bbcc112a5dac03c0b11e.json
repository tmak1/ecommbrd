{"ast":null,"code":"import _slicedToArray from\"/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,createContext}from'react';import{useLocation,useHistory}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";export var ProductMetaDataContext=/*#__PURE__*/createContext({page:'',setPage:function setPage(){},searchTerm:'',setSearchTerm:function setSearchTerm(){},perPage:'',setPerPage:function setPerPage(){},filters:[],setFilters:function setFilters(){},sort:'',setSort:function setSort(){},rating:'',setRating:function setRating(){}});var ProductMetaDataContextProvider=function ProductMetaDataContextProvider(_ref){var _query$get;var children=_ref.children;var _useHistory=useHistory(),push=_useHistory.push,_useHistory$location=_useHistory.location,pathname=_useHistory$location.pathname,search=_useHistory$location.search;useLocation();// don't delete this!\nvar _useState=useState(new URLSearchParams(search)),_useState2=_slicedToArray(_useState,2),query=_useState2[0],setQuery=_useState2[1];var searchTermFromUrl=query.get('search')||'';var ratingFromUrl=query.get('rating')||3;var pageFromUrl=query.get('page')||1;var perPageFromUrl=query.get('perPage')||5;var filtersFromUrl=((_query$get=query.get('filters'))===null||_query$get===void 0?void 0:_query$get.split(','))||[];var sortFromUrl=query.get('sort')||'price|DESC';var _useState3=useState(searchTermFromUrl),_useState4=_slicedToArray(_useState3,2),searchTerm=_useState4[0],setSearchTerm=_useState4[1];var _useState5=useState(ratingFromUrl),_useState6=_slicedToArray(_useState5,2),rating=_useState6[0],setRating=_useState6[1];var _useState7=useState(pageFromUrl),_useState8=_slicedToArray(_useState7,2),page=_useState8[0],setPage=_useState8[1];var _useState9=useState(perPageFromUrl),_useState10=_slicedToArray(_useState9,2),perPage=_useState10[0],setPerPage=_useState10[1];var _useState11=useState(filtersFromUrl),_useState12=_slicedToArray(_useState11,2),filters=_useState12[0],setFilters=_useState12[1];var _useState13=useState(sortFromUrl),_useState14=_slicedToArray(_useState13,2),sort=_useState14[0],setSort=_useState14[1];useEffect(function(){setQuery(new URLSearchParams(search));},[search]);useEffect(function(){if(pathname==='/products'&&!query.toString()){push(\"/products?page=1&search=&rating=&perPage=&filters=&sort=\");setSearchTerm('');setPage(1);setFilters([]);setSort('price|DESC');}},[push,query,pathname]);useEffect(function(){if(searchTerm.trim()!==''){setRating(1);setFilters([]);}},[searchTerm]);useEffect(function(){push(\"/products?page=1&search=\".concat(searchTerm,\"&rating=\").concat(rating,\"&perPage=\").concat(perPage,\"&filters=\").concat(filters,\"&sort=\").concat(sort));setPage(1);},[push,searchTerm,rating,perPage,filters,sort]);useEffect(function(){push(\"/products?page=\".concat(page,\"&search=\").concat(searchTerm,\"&rating=\").concat(rating,\"&perPage=\").concat(perPage,\"&filters=\").concat(filters,\"&sort=\").concat(sort));},[push,page,searchTerm,rating,perPage,filters,sort]);return/*#__PURE__*/_jsx(ProductMetaDataContext.Provider,{value:{page:page,setPage:setPage,searchTerm:searchTerm,setSearchTerm:setSearchTerm,perPage:perPage,setPerPage:setPerPage,filters:filters,setFilters:setFilters,sort:sort,setSort:setSort,rating:rating,setRating:setRating},children:children});};export default ProductMetaDataContextProvider;","map":{"version":3,"sources":["/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/client/src/components/shared/contexts/ProductMetaDataContextProvider.js"],"names":["React","useState","useEffect","createContext","useLocation","useHistory","ProductMetaDataContext","page","setPage","searchTerm","setSearchTerm","perPage","setPerPage","filters","setFilters","sort","setSort","rating","setRating","ProductMetaDataContextProvider","children","push","location","pathname","search","URLSearchParams","query","setQuery","searchTermFromUrl","get","ratingFromUrl","pageFromUrl","perPageFromUrl","filtersFromUrl","split","sortFromUrl","toString","trim"],"mappings":"wKAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,CAAqCC,aAArC,KAA0D,OAA1D,CACA,OAASC,WAAT,CAAsBC,UAAtB,KAAwC,kBAAxC,C,2CAEA,MAAO,IAAMC,CAAAA,sBAAsB,cAAGH,aAAa,CAAC,CAClDI,IAAI,CAAE,EAD4C,CAElDC,OAAO,CAAE,kBAAM,CAAE,CAFiC,CAGlDC,UAAU,CAAE,EAHsC,CAIlDC,aAAa,CAAE,wBAAM,CAAE,CAJ2B,CAKlDC,OAAO,CAAE,EALyC,CAMlDC,UAAU,CAAE,qBAAM,CAAE,CAN8B,CAOlDC,OAAO,CAAE,EAPyC,CAQlDC,UAAU,CAAE,qBAAM,CAAE,CAR8B,CASlDC,IAAI,CAAE,EAT4C,CAUlDC,OAAO,CAAE,kBAAM,CAAE,CAViC,CAWlDC,MAAM,CAAE,EAX0C,CAYlDC,SAAS,CAAE,oBAAM,CAAE,CAZ+B,CAAD,CAA5C,CAeP,GAAMC,CAAAA,8BAA8B,CAAG,QAAjCA,CAAAA,8BAAiC,MAAkB,mBAAfC,CAAAA,QAAe,MAAfA,QAAe,CACvD,gBAGIf,UAAU,EAHd,CACEgB,IADF,aACEA,IADF,kCAEEC,QAFF,CAEcC,QAFd,sBAEcA,QAFd,CAEwBC,MAFxB,sBAEwBA,MAFxB,CAIApB,WAAW,GAAI;AACf,cAA0BH,QAAQ,CAAC,GAAIwB,CAAAA,eAAJ,CAAoBD,MAApB,CAAD,CAAlC,wCAAOE,KAAP,eAAcC,QAAd,eACA,GAAMC,CAAAA,iBAAiB,CAAGF,KAAK,CAACG,GAAN,CAAU,QAAV,GAAuB,EAAjD,CACA,GAAMC,CAAAA,aAAa,CAAGJ,KAAK,CAACG,GAAN,CAAU,QAAV,GAAuB,CAA7C,CACA,GAAME,CAAAA,WAAW,CAAGL,KAAK,CAACG,GAAN,CAAU,MAAV,GAAqB,CAAzC,CACA,GAAMG,CAAAA,cAAc,CAAGN,KAAK,CAACG,GAAN,CAAU,SAAV,GAAwB,CAA/C,CACA,GAAMI,CAAAA,cAAc,CAAG,aAAAP,KAAK,CAACG,GAAN,CAAU,SAAV,iDAAsBK,KAAtB,CAA4B,GAA5B,IAAoC,EAA3D,CACA,GAAMC,CAAAA,WAAW,CAAGT,KAAK,CAACG,GAAN,CAAU,MAAV,GAAqB,YAAzC,CAEA,eAAoC5B,QAAQ,CAAC2B,iBAAD,CAA5C,yCAAOnB,UAAP,eAAmBC,aAAnB,eACA,eAA4BT,QAAQ,CAAC6B,aAAD,CAApC,yCAAOb,MAAP,eAAeC,SAAf,eACA,eAAwBjB,QAAQ,CAAC8B,WAAD,CAAhC,yCAAOxB,IAAP,eAAaC,OAAb,eACA,eAA8BP,QAAQ,CAAC+B,cAAD,CAAtC,0CAAOrB,OAAP,gBAAgBC,UAAhB,gBACA,gBAA8BX,QAAQ,CAACgC,cAAD,CAAtC,2CAAOpB,OAAP,gBAAgBC,UAAhB,gBACA,gBAAwBb,QAAQ,CAACkC,WAAD,CAAhC,2CAAOpB,IAAP,gBAAaC,OAAb,gBAEAd,SAAS,CAAC,UAAM,CACdyB,QAAQ,CAAC,GAAIF,CAAAA,eAAJ,CAAoBD,MAApB,CAAD,CAAR,CACD,CAFQ,CAEN,CAACA,MAAD,CAFM,CAAT,CAIAtB,SAAS,CAAC,UAAM,CACd,GAAIqB,QAAQ,GAAK,WAAb,EAA4B,CAACG,KAAK,CAACU,QAAN,EAAjC,CAAmD,CACjDf,IAAI,4DAAJ,CACAX,aAAa,CAAC,EAAD,CAAb,CACAF,OAAO,CAAC,CAAD,CAAP,CACAM,UAAU,CAAC,EAAD,CAAV,CACAE,OAAO,CAAC,YAAD,CAAP,CACD,CACF,CARQ,CAQN,CAACK,IAAD,CAAOK,KAAP,CAAcH,QAAd,CARM,CAAT,CAUArB,SAAS,CAAC,UAAM,CACd,GAAIO,UAAU,CAAC4B,IAAX,KAAsB,EAA1B,CAA8B,CAC5BnB,SAAS,CAAC,CAAD,CAAT,CACAJ,UAAU,CAAC,EAAD,CAAV,CACD,CACF,CALQ,CAKN,CAACL,UAAD,CALM,CAAT,CAOAP,SAAS,CAAC,UAAM,CACdmB,IAAI,mCACyBZ,UADzB,oBAC8CQ,MAD9C,qBACgEN,OADhE,qBACmFE,OADnF,kBACmGE,IADnG,EAAJ,CAGAP,OAAO,CAAC,CAAD,CAAP,CACD,CALQ,CAKN,CAACa,IAAD,CAAOZ,UAAP,CAAmBQ,MAAnB,CAA2BN,OAA3B,CAAoCE,OAApC,CAA6CE,IAA7C,CALM,CAAT,CAOAb,SAAS,CAAC,UAAM,CACdmB,IAAI,0BACgBd,IADhB,oBAC+BE,UAD/B,oBACoDQ,MADpD,qBACsEN,OADtE,qBACyFE,OADzF,kBACyGE,IADzG,EAAJ,CAGD,CAJQ,CAIN,CAACM,IAAD,CAAOd,IAAP,CAAaE,UAAb,CAAyBQ,MAAzB,CAAiCN,OAAjC,CAA0CE,OAA1C,CAAmDE,IAAnD,CAJM,CAAT,CAMA,mBACE,KAAC,sBAAD,CAAwB,QAAxB,EACE,KAAK,CAAE,CACLR,IAAI,CAAJA,IADK,CAELC,OAAO,CAAPA,OAFK,CAGLC,UAAU,CAAVA,UAHK,CAILC,aAAa,CAAbA,aAJK,CAKLC,OAAO,CAAPA,OALK,CAMLC,UAAU,CAAVA,UANK,CAOLC,OAAO,CAAPA,OAPK,CAQLC,UAAU,CAAVA,UARK,CASLC,IAAI,CAAJA,IATK,CAULC,OAAO,CAAPA,OAVK,CAWLC,MAAM,CAANA,MAXK,CAYLC,SAAS,CAATA,SAZK,CADT,UAgBGE,QAhBH,EADF,CAoBD,CA3ED,CA6EA,cAAeD,CAAAA,8BAAf","sourcesContent":["import React, { useState, useEffect, createContext } from 'react';\nimport { useLocation, useHistory } from 'react-router-dom';\n\nexport const ProductMetaDataContext = createContext({\n  page: '',\n  setPage: () => {},\n  searchTerm: '',\n  setSearchTerm: () => {},\n  perPage: '',\n  setPerPage: () => {},\n  filters: [],\n  setFilters: () => {},\n  sort: '',\n  setSort: () => {},\n  rating: '',\n  setRating: () => {},\n});\n\nconst ProductMetaDataContextProvider = ({ children }) => {\n  const {\n    push,\n    location: { pathname, search },\n  } = useHistory();\n  useLocation(); // don't delete this!\n  const [query, setQuery] = useState(new URLSearchParams(search));\n  const searchTermFromUrl = query.get('search') || '';\n  const ratingFromUrl = query.get('rating') || 3;\n  const pageFromUrl = query.get('page') || 1;\n  const perPageFromUrl = query.get('perPage') || 5;\n  const filtersFromUrl = query.get('filters')?.split(',') || [];\n  const sortFromUrl = query.get('sort') || 'price|DESC';\n\n  const [searchTerm, setSearchTerm] = useState(searchTermFromUrl);\n  const [rating, setRating] = useState(ratingFromUrl);\n  const [page, setPage] = useState(pageFromUrl);\n  const [perPage, setPerPage] = useState(perPageFromUrl);\n  const [filters, setFilters] = useState(filtersFromUrl);\n  const [sort, setSort] = useState(sortFromUrl);\n\n  useEffect(() => {\n    setQuery(new URLSearchParams(search));\n  }, [search]);\n\n  useEffect(() => {\n    if (pathname === '/products' && !query.toString()) {\n      push(`/products?page=1&search=&rating=&perPage=&filters=&sort=`);\n      setSearchTerm('');\n      setPage(1);\n      setFilters([]);\n      setSort('price|DESC');\n    }\n  }, [push, query, pathname]);\n\n  useEffect(() => {\n    if (searchTerm.trim() !== '') {\n      setRating(1);\n      setFilters([]);\n    }\n  }, [searchTerm]);\n\n  useEffect(() => {\n    push(\n      `/products?page=1&search=${searchTerm}&rating=${rating}&perPage=${perPage}&filters=${filters}&sort=${sort}`\n    );\n    setPage(1);\n  }, [push, searchTerm, rating, perPage, filters, sort]);\n\n  useEffect(() => {\n    push(\n      `/products?page=${page}&search=${searchTerm}&rating=${rating}&perPage=${perPage}&filters=${filters}&sort=${sort}`\n    );\n  }, [push, page, searchTerm, rating, perPage, filters, sort]);\n\n  return (\n    <ProductMetaDataContext.Provider\n      value={{\n        page,\n        setPage,\n        searchTerm,\n        setSearchTerm,\n        perPage,\n        setPerPage,\n        filters,\n        setFilters,\n        sort,\n        setSort,\n        rating,\n        setRating,\n      }}\n    >\n      {children}\n    </ProductMetaDataContext.Provider>\n  );\n};\n\nexport default ProductMetaDataContextProvider;\n"]},"metadata":{},"sourceType":"module"}
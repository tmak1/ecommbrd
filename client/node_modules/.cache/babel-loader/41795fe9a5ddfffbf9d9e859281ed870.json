{"ast":null,"code":"import _regeneratorRuntime from\"/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{PLACE_ORDER_FAILURE,PLACE_ORDER_SUCCESS,PLACE_ORDER_REQUEST,ORDER_DETAILS_REQUEST,ORDER_DETAILS_SUCCESS,ORDER_DETAILS_FAILURE,ORDER_LIST_REQUEST,ORDER_LIST_SUCCESS,ORDER_LIST_FAILURE,USER_ORDER_LIST_REQUEST,USER_ORDER_LIST_SUCCESS,USER_ORDER_LIST_FAILURE,PRODUCT_ORDER_LIST_REQUEST,PRODUCT_ORDER_LIST_SUCCESS,PRODUCT_ORDER_LIST_FAILURE,PRODUCT_ORDER_BY_USER_REQUEST,PRODUCT_ORDER_BY_USER_SUCCESS,PRODUCT_ORDER_BY_USER_FAILURE,UPDATE_ORDER_ISDELIVERED_REQUEST,UPDATE_ORDER_ISDELIVERED_SUCCESS,UPDATE_ORDER_ISDELIVERED_FAILURE}from'../actions/orderActions';import{sendRequest}from'../../helpers';var updateLocalStorage=function updateLocalStorage(item,key){var shoppingapp=localStorage.getItem('shoppingapp');if(shoppingapp){shoppingapp=JSON.parse(shoppingapp);if((item===null||item===void 0?void 0:item.length)>0){return localStorage.setItem('shoppingapp',JSON.stringify(_objectSpread(_objectSpread({},shoppingapp),{},_defineProperty({},key,item))));}delete shoppingapp[key];return localStorage.setItem('shoppingapp',JSON.stringify(shoppingapp));}if(item){localStorage.setItem('shoppingapp',JSON.stringify(_defineProperty({},key,item)));}};export var placeOrder=function placeOrder(_ref){var shippingAddressId=_ref.shippingAddressId,paymentMethodId=_ref.paymentMethodId,orderItems=_ref.orderItems,paymentResult=_ref.paymentResult,token=_ref.token,tax=_ref.tax,shippingCost=_ref.shippingCost,total=_ref.total,subTotal=_ref.subTotal,isPaid=_ref.isPaid,paidAt=_ref.paidAt,isDelivered=_ref.isDelivered,deliveredAt=_ref.deliveredAt,onSuccess=_ref.onSuccess;return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch,getState){var _yield$sendRequest,error,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;dispatch({type:PLACE_ORDER_REQUEST});_context.next=4;return sendRequest(\"\".concat(process.env.REACT_APP_API_URL,\"/orders/new\"),'POST',{'Content-Type':'application/json',Authorization:\"Bearer \".concat(token)},JSON.stringify({shippingAddressId:shippingAddressId,paymentMethodId:paymentMethodId,paymentResult:paymentResult,orderItems:orderItems,tax:tax,shippingCost:shippingCost,total:total,subTotal:subTotal,isPaid:isPaid,paidAt:paidAt,isDelivered:isDelivered,deliveredAt:deliveredAt}));case 4:_yield$sendRequest=_context.sent;error=_yield$sendRequest.error;data=_yield$sendRequest.data;if(error){dispatch({type:PLACE_ORDER_FAILURE,payload:error});}dispatch({type:PLACE_ORDER_SUCCESS,payload:{msg:'success',id:data===null||data===void 0?void 0:data.id}});onSuccess(getState().orderCreated.order.id);//updateLocalStorage(getState().checkout.placeOrder, 'order');\n_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 15:case\"end\":return _context.stop();}}},_callee,null,[[0,12]]);}));return function(_x,_x2){return _ref2.apply(this,arguments);};}();};export var getOrderDetails=function getOrderDetails(orderId,token){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch,getState){var _yield$sendRequest2,error,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;dispatch({type:ORDER_DETAILS_REQUEST});_context2.next=4;return sendRequest(\"\".concat(process.env.REACT_APP_API_URL,\"/orders/\").concat(orderId),'GET',{Authorization:\"Bearer \".concat(token)});case 4:_yield$sendRequest2=_context2.sent;error=_yield$sendRequest2.error;data=_yield$sendRequest2.data;if(error){dispatch({type:ORDER_DETAILS_FAILURE,payload:error});}dispatch({type:ORDER_DETAILS_SUCCESS,payload:data});//updateLocalStorage(getState().checkout.placeOrder, 'order');\n_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[0,11]]);}));return function(_x3,_x4){return _ref3.apply(this,arguments);};}();};export var getOrderList=function getOrderList(token){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch,getState){var _yield$sendRequest3,error,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;dispatch({type:ORDER_LIST_REQUEST});_context3.next=4;return sendRequest(\"\".concat(process.env.REACT_APP_API_URL,\"/orders\"),'GET',{Authorization:\"Bearer \".concat(token)});case 4:_yield$sendRequest3=_context3.sent;error=_yield$sendRequest3.error;data=_yield$sendRequest3.data;if(error){dispatch({type:ORDER_LIST_FAILURE,payload:error});}dispatch({type:ORDER_LIST_SUCCESS,payload:data});//updateLocalStorage(getState().checkout.placeOrder, 'order');\nupdateLocalStorage(getState().orderList.orders,'order');_context3.next=15;break;case 12:_context3.prev=12;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);case 15:case\"end\":return _context3.stop();}}},_callee3,null,[[0,12]]);}));return function(_x5,_x6){return _ref4.apply(this,arguments);};}();};export var getOrderListByUser=function getOrderListByUser(userId,token){var searchTerm=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'';var page=arguments.length>3&&arguments[3]!==undefined?arguments[3]:'';var perPage=arguments.length>4&&arguments[4]!==undefined?arguments[4]:'';return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch,getState){var _yield$sendRequest4,error,data;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;dispatch({type:USER_ORDER_LIST_REQUEST});_context4.next=4;return sendRequest(\"\".concat(process.env.REACT_APP_API_URL,\"/orders/users/\").concat(userId,\"?orderId=\").concat(searchTerm,\"&page=\").concat(page,\"&perPage=\").concat(perPage),'GET',{Authorization:\"Bearer \".concat(token)});case 4:_yield$sendRequest4=_context4.sent;error=_yield$sendRequest4.error;data=_yield$sendRequest4.data;if(error){dispatch({type:USER_ORDER_LIST_FAILURE,payload:error});}dispatch({type:USER_ORDER_LIST_SUCCESS,payload:data});_context4.next=14;break;case 11:_context4.prev=11;_context4.t0=_context4[\"catch\"](0);console.log(_context4.t0);case 14:case\"end\":return _context4.stop();}}},_callee4,null,[[0,11]]);}));return function(_x7,_x8){return _ref5.apply(this,arguments);};}();};export var getOrderListByProduct=function getOrderListByProduct(productId,token){var searchTerm=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'';var page=arguments.length>3&&arguments[3]!==undefined?arguments[3]:'';var perPage=arguments.length>4&&arguments[4]!==undefined?arguments[4]:'';return/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch,getState){var _yield$sendRequest5,error,data;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;dispatch({type:PRODUCT_ORDER_LIST_REQUEST});_context5.next=4;return sendRequest(\"\".concat(process.env.REACT_APP_API_URL,\"/orders/products/\").concat(productId,\"?orderId=\").concat(searchTerm,\"&page=\").concat(page,\"&perPage=\").concat(perPage),'GET',{Authorization:\"Bearer \".concat(token)});case 4:_yield$sendRequest5=_context5.sent;error=_yield$sendRequest5.error;data=_yield$sendRequest5.data;if(error){dispatch({type:PRODUCT_ORDER_LIST_FAILURE,payload:error});}dispatch({type:PRODUCT_ORDER_LIST_SUCCESS,payload:data});_context5.next=14;break;case 11:_context5.prev=11;_context5.t0=_context5[\"catch\"](0);console.log(_context5.t0);case 14:case\"end\":return _context5.stop();}}},_callee5,null,[[0,11]]);}));return function(_x9,_x10){return _ref6.apply(this,arguments);};}();};export var getProductOrderByUser=function getProductOrderByUser(productId,token){return/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(dispatch,getState){var _yield$sendRequest6,error,data;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.prev=0;dispatch({type:PRODUCT_ORDER_BY_USER_REQUEST});_context6.next=4;return sendRequest(\"\".concat(process.env.REACT_APP_API_URL,\"/orders/products/\").concat(productId),'GET',{Authorization:\"Bearer \".concat(token)});case 4:_yield$sendRequest6=_context6.sent;error=_yield$sendRequest6.error;data=_yield$sendRequest6.data;if(error){dispatch({type:PRODUCT_ORDER_BY_USER_FAILURE,payload:error});}dispatch({type:PRODUCT_ORDER_BY_USER_SUCCESS,payload:data});_context6.next=14;break;case 11:_context6.prev=11;_context6.t0=_context6[\"catch\"](0);console.log(_context6.t0);case 14:case\"end\":return _context6.stop();}}},_callee6,null,[[0,11]]);}));return function(_x11,_x12){return _ref7.apply(this,arguments);};}();};export var updateOrderIsDelivered=function updateOrderIsDelivered(orderId,token,updateInfo){var onSuccess=arguments.length>3&&arguments[3]!==undefined?arguments[3]:function(){};return/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(dispatch,getState){var _yield$sendRequest7,error,data;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.prev=0;dispatch({type:UPDATE_ORDER_ISDELIVERED_REQUEST});_context7.next=4;return sendRequest(\"\".concat(process.env.REACT_APP_API_URL,\"/orders/\").concat(orderId),'PATCH',{Authorization:\"Bearer \".concat(token),'Content-Type':'application/json'},JSON.stringify(updateInfo));case 4:_yield$sendRequest7=_context7.sent;error=_yield$sendRequest7.error;data=_yield$sendRequest7.data;if(error){dispatch({type:UPDATE_ORDER_ISDELIVERED_FAILURE,payload:error});}dispatch({type:UPDATE_ORDER_ISDELIVERED_SUCCESS,payload:data});onSuccess();_context7.next=15;break;case 12:_context7.prev=12;_context7.t0=_context7[\"catch\"](0);console.log(_context7.t0);case 15:case\"end\":return _context7.stop();}}},_callee7,null,[[0,12]]);}));return function(_x13,_x14){return _ref8.apply(this,arguments);};}();};","map":{"version":3,"sources":["/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/client/src/redux/actionCreators/orderActionCreators.js"],"names":["PLACE_ORDER_FAILURE","PLACE_ORDER_SUCCESS","PLACE_ORDER_REQUEST","ORDER_DETAILS_REQUEST","ORDER_DETAILS_SUCCESS","ORDER_DETAILS_FAILURE","ORDER_LIST_REQUEST","ORDER_LIST_SUCCESS","ORDER_LIST_FAILURE","USER_ORDER_LIST_REQUEST","USER_ORDER_LIST_SUCCESS","USER_ORDER_LIST_FAILURE","PRODUCT_ORDER_LIST_REQUEST","PRODUCT_ORDER_LIST_SUCCESS","PRODUCT_ORDER_LIST_FAILURE","PRODUCT_ORDER_BY_USER_REQUEST","PRODUCT_ORDER_BY_USER_SUCCESS","PRODUCT_ORDER_BY_USER_FAILURE","UPDATE_ORDER_ISDELIVERED_REQUEST","UPDATE_ORDER_ISDELIVERED_SUCCESS","UPDATE_ORDER_ISDELIVERED_FAILURE","sendRequest","updateLocalStorage","item","key","shoppingapp","localStorage","getItem","JSON","parse","length","setItem","stringify","placeOrder","shippingAddressId","paymentMethodId","orderItems","paymentResult","token","tax","shippingCost","total","subTotal","isPaid","paidAt","isDelivered","deliveredAt","onSuccess","dispatch","getState","type","process","env","REACT_APP_API_URL","Authorization","error","data","payload","msg","id","orderCreated","order","console","log","getOrderDetails","orderId","getOrderList","orderList","orders","getOrderListByUser","userId","searchTerm","page","perPage","getOrderListByProduct","productId","getProductOrderByUser","updateOrderIsDelivered","updateInfo"],"mappings":"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","sourcesContent":["import {\n  PLACE_ORDER_FAILURE,\n  PLACE_ORDER_SUCCESS,\n  PLACE_ORDER_REQUEST,\n  ORDER_DETAILS_REQUEST,\n  ORDER_DETAILS_SUCCESS,\n  ORDER_DETAILS_FAILURE,\n  ORDER_LIST_REQUEST,\n  ORDER_LIST_SUCCESS,\n  ORDER_LIST_FAILURE,\n  USER_ORDER_LIST_REQUEST,\n  USER_ORDER_LIST_SUCCESS,\n  USER_ORDER_LIST_FAILURE,\n  PRODUCT_ORDER_LIST_REQUEST,\n  PRODUCT_ORDER_LIST_SUCCESS,\n  PRODUCT_ORDER_LIST_FAILURE,\n  PRODUCT_ORDER_BY_USER_REQUEST,\n  PRODUCT_ORDER_BY_USER_SUCCESS,\n  PRODUCT_ORDER_BY_USER_FAILURE,\n  UPDATE_ORDER_ISDELIVERED_REQUEST,\n  UPDATE_ORDER_ISDELIVERED_SUCCESS,\n  UPDATE_ORDER_ISDELIVERED_FAILURE,\n} from '../actions/orderActions';\nimport { sendRequest } from '../../helpers';\n\nconst updateLocalStorage = (item, key) => {\n  let shoppingapp = localStorage.getItem('shoppingapp');\n  if (shoppingapp) {\n    shoppingapp = JSON.parse(shoppingapp);\n    if (item?.length > 0) {\n      return localStorage.setItem(\n        'shoppingapp',\n        JSON.stringify({ ...shoppingapp, [key]: item })\n      );\n    }\n    delete shoppingapp[key];\n    return localStorage.setItem('shoppingapp', JSON.stringify(shoppingapp));\n  }\n  if (item) {\n    localStorage.setItem('shoppingapp', JSON.stringify({ [key]: item }));\n  }\n};\n\nexport const placeOrder =\n  ({\n    shippingAddressId,\n    paymentMethodId,\n    orderItems,\n    paymentResult,\n    token,\n    tax,\n    shippingCost,\n    total,\n    subTotal,\n    isPaid,\n    paidAt,\n    isDelivered,\n    deliveredAt,\n    onSuccess,\n  }) =>\n  async (dispatch, getState) => {\n    try {\n      dispatch({ type: PLACE_ORDER_REQUEST });\n      const { error, data } = await sendRequest(\n        `${process.env.REACT_APP_API_URL}/orders/new`,\n        'POST',\n        {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`,\n        },\n        JSON.stringify({\n          shippingAddressId,\n          paymentMethodId,\n          paymentResult,\n          orderItems,\n          tax,\n          shippingCost,\n          total,\n          subTotal,\n          isPaid,\n          paidAt,\n          isDelivered,\n          deliveredAt,\n        })\n      );\n      if (error) {\n        dispatch({ type: PLACE_ORDER_FAILURE, payload: error });\n      }\n      dispatch({\n        type: PLACE_ORDER_SUCCESS,\n        payload: { msg: 'success', id: data?.id },\n      });\n      onSuccess(getState().orderCreated.order.id);\n      //updateLocalStorage(getState().checkout.placeOrder, 'order');\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\nexport const getOrderDetails =\n  (orderId, token) => async (dispatch, getState) => {\n    try {\n      dispatch({ type: ORDER_DETAILS_REQUEST });\n      const { error, data } = await sendRequest(\n        `${process.env.REACT_APP_API_URL}/orders/${orderId}`,\n        'GET',\n        {\n          Authorization: `Bearer ${token}`,\n        }\n      );\n      if (error) {\n        dispatch({ type: ORDER_DETAILS_FAILURE, payload: error });\n      }\n      dispatch({ type: ORDER_DETAILS_SUCCESS, payload: data });\n      //updateLocalStorage(getState().checkout.placeOrder, 'order');\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\nexport const getOrderList = (token) => async (dispatch, getState) => {\n  try {\n    dispatch({ type: ORDER_LIST_REQUEST });\n    const { error, data } = await sendRequest(\n      `${process.env.REACT_APP_API_URL}/orders`,\n      'GET',\n      {\n        Authorization: `Bearer ${token}`,\n      }\n    );\n    if (error) {\n      dispatch({ type: ORDER_LIST_FAILURE, payload: error });\n    }\n    dispatch({ type: ORDER_LIST_SUCCESS, payload: data });\n    //updateLocalStorage(getState().checkout.placeOrder, 'order');\n    updateLocalStorage(getState().orderList.orders, 'order');\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nexport const getOrderListByUser =\n  (userId, token, searchTerm = '', page = '', perPage = '') =>\n  async (dispatch, getState) => {\n    try {\n      dispatch({ type: USER_ORDER_LIST_REQUEST });\n      const { error, data } = await sendRequest(\n        `${process.env.REACT_APP_API_URL}/orders/users/${userId}?orderId=${searchTerm}&page=${page}&perPage=${perPage}`,\n        'GET',\n        {\n          Authorization: `Bearer ${token}`,\n        }\n      );\n      if (error) {\n        dispatch({ type: USER_ORDER_LIST_FAILURE, payload: error });\n      }\n      dispatch({ type: USER_ORDER_LIST_SUCCESS, payload: data });\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\nexport const getOrderListByProduct =\n  (productId, token, searchTerm = '', page = '', perPage = '') =>\n  async (dispatch, getState) => {\n    try {\n      dispatch({ type: PRODUCT_ORDER_LIST_REQUEST });\n      const { error, data } = await sendRequest(\n        `${process.env.REACT_APP_API_URL}/orders/products/${productId}?orderId=${searchTerm}&page=${page}&perPage=${perPage}`,\n        'GET',\n        {\n          Authorization: `Bearer ${token}`,\n        }\n      );\n      if (error) {\n        dispatch({ type: PRODUCT_ORDER_LIST_FAILURE, payload: error });\n      }\n      dispatch({ type: PRODUCT_ORDER_LIST_SUCCESS, payload: data });\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\nexport const getProductOrderByUser =\n  (productId, token) => async (dispatch, getState) => {\n    try {\n      dispatch({ type: PRODUCT_ORDER_BY_USER_REQUEST });\n      const { error, data } = await sendRequest(\n        `${process.env.REACT_APP_API_URL}/orders/products/${productId}`,\n        'GET',\n        {\n          Authorization: `Bearer ${token}`,\n        }\n      );\n      if (error) {\n        dispatch({ type: PRODUCT_ORDER_BY_USER_FAILURE, payload: error });\n      }\n      dispatch({ type: PRODUCT_ORDER_BY_USER_SUCCESS, payload: data });\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\nexport const updateOrderIsDelivered =\n  (orderId, token, updateInfo, onSuccess = () => {}) =>\n  async (dispatch, getState) => {\n    try {\n      dispatch({ type: UPDATE_ORDER_ISDELIVERED_REQUEST });\n      const { error, data } = await sendRequest(\n        `${process.env.REACT_APP_API_URL}/orders/${orderId}`,\n        'PATCH',\n        {\n          Authorization: `Bearer ${token}`,\n          'Content-Type': 'application/json',\n        },\n        JSON.stringify(updateInfo)\n      );\n      if (error) {\n        dispatch({ type: UPDATE_ORDER_ISDELIVERED_FAILURE, payload: error });\n      }\n      dispatch({ type: UPDATE_ORDER_ISDELIVERED_SUCCESS, payload: data });\n      onSuccess();\n    } catch (error) {\n      console.log(error);\n    }\n  };\n"]},"metadata":{},"sourceType":"module"}
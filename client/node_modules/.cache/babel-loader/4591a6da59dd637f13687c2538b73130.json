{"ast":null,"code":"import _slicedToArray from\"/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{Link as Rlink}from'react-router-dom';import{useDispatch}from'react-redux';import{Formik,Form}from'formik';import*as Yup from'yup';import PageHeading from'../../shared/ui/PageHeading';import FormikTextField from'../../shared/formElements/FormikTextField';import BigButton from'../../shared/ui/BigButton';import ShowPasswordAdornment from'../../shared/ui/ShowPasswordAdornment';import{authenticateUser}from'../../../redux/actionCreators/userActionCreators';import{makeStyles}from'@material-ui/core/styles';import Typography from'@material-ui/core/Typography';import Paper from'@material-ui/core/Paper';import Link from'@material-ui/core/Link';import LockIcon from'@material-ui/icons/Lock';import LockOpenIcon from'@material-ui/icons/LockOpen';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{root:{width:'100%',padding:theme.spacing(3)},passwordreset:{margin:'10px 0 20px 10px'}};});var LoginForm=function LoginForm(_ref){var loggedIn=_ref.loggedIn;var classes=useStyles();var dispatch=useDispatch();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showPassword=_useState2[0],setShowPassword=_useState2[1];var initialValues={email:'',password:''};var validationSchema=Yup.object({email:Yup.string().required('Email required').email('Invalid email format'),password:Yup.string().required('Password required').test('len','Must be atleast (3) characters',function(val){return(val===null||val===void 0?void 0:val.length)>=3;})});var toggleShowPassword=function toggleShowPassword(){setShowPassword(function(prevState){return!prevState;});};var submitHandler=function submitHandler(values,actions){dispatch(authenticateUser(values,'login'));//console.log(values);\nactions.setSubmitting(false);};return/*#__PURE__*/_jsxs(Paper,{className:classes.root,children:[/*#__PURE__*/_jsx(\"div\",{children:!loggedIn?/*#__PURE__*/_jsx(LockOpenIcon,{}):/*#__PURE__*/_jsx(LockIcon,{})}),/*#__PURE__*/_jsx(PageHeading,{text:!loggedIn?'SIGNIN':'You are logged in!',size:loggedIn&&'small',gutterBottom:true}),/*#__PURE__*/_jsx(Formik,{initialValues:initialValues,validationSchema:validationSchema,onSubmit:submitHandler,validateOnMount:true,enableReinitialize:true,children:function children(formik){return/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsx(\"div\",{className:classes.formControl,children:/*#__PURE__*/_jsx(FormikTextField,{fieldName:\"email\",type:\"email\",id:\"email\",name:\"email\",label:\"Enter your email\",variant:\"outlined\",disabled:loggedIn})}),/*#__PURE__*/_jsxs(\"div\",{className:classes.formControl,children:[/*#__PURE__*/_jsx(FormikTextField,{fieldName:\"password\",type:showPassword?'text':'password',id:\"password\",name:\"password\",label:\"Enter your password\",variant:\"outlined\",disabled:loggedIn,adornment:/*#__PURE__*/_jsx(ShowPasswordAdornment,{showPassword:showPassword,toggleShowPassword:toggleShowPassword}),adornmentPosition:\"end\"}),/*#__PURE__*/_jsx(Link,{component:Rlink,to:\"/pages/1\",align:\"left\",color:\"textSecondary\",disabled:loggedIn,children:/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",align:\"left\",gutterBottom:true,paragraph:true,className:classes.passwordreset,children:\"Forgot Password?\"})})]}),/*#__PURE__*/_jsx(BigButton,{type:\"submit\",disabled:!formik.isValid||formik.isSubmitting||loggedIn,children:\"LOGIN\"})]});}})]});};export default LoginForm;","map":{"version":3,"sources":["/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/client/src/components/users/components/LoginForm.js"],"names":["React","useState","Link","Rlink","useDispatch","Formik","Form","Yup","PageHeading","FormikTextField","BigButton","ShowPasswordAdornment","authenticateUser","makeStyles","Typography","Paper","LockIcon","LockOpenIcon","useStyles","theme","root","width","padding","spacing","passwordreset","margin","LoginForm","loggedIn","classes","dispatch","showPassword","setShowPassword","initialValues","email","password","validationSchema","object","string","required","test","val","length","toggleShowPassword","prevState","submitHandler","values","actions","setSubmitting","formik","formControl","isValid","isSubmitting"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { Link as Rlink } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport { Formik, Form } from 'formik';\nimport * as Yup from 'yup';\n\nimport PageHeading from '../../shared/ui/PageHeading';\nimport FormikTextField from '../../shared/formElements/FormikTextField';\nimport BigButton from '../../shared/ui/BigButton';\nimport ShowPasswordAdornment from '../../shared/ui/ShowPasswordAdornment';\n\nimport { authenticateUser } from '../../../redux/actionCreators/userActionCreators';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport Link from '@material-ui/core/Link';\nimport LockIcon from '@material-ui/icons/Lock';\nimport LockOpenIcon from '@material-ui/icons/LockOpen';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n    padding: theme.spacing(3),\n  },\n  passwordreset: {\n    margin: '10px 0 20px 10px',\n  },\n}));\n\nconst LoginForm = ({ loggedIn }) => {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const [showPassword, setShowPassword] = useState(false);\n  const initialValues = {\n    email: '',\n    password: '',\n  };\n  const validationSchema = Yup.object({\n    email: Yup.string()\n      .required('Email required')\n      .email('Invalid email format'),\n    password: Yup.string()\n      .required('Password required')\n      .test('len', 'Must be atleast (3) characters', (val) => val?.length >= 3),\n  });\n\n  const toggleShowPassword = () => {\n    setShowPassword((prevState) => !prevState);\n  };\n\n  const submitHandler = (values, actions) => {\n    dispatch(authenticateUser(values, 'login'));\n    //console.log(values);\n    actions.setSubmitting(false);\n  };\n\n  return (\n    <Paper className={classes.root}>\n      <div>{!loggedIn ? <LockOpenIcon /> : <LockIcon />}</div>\n      <PageHeading\n        text={!loggedIn ? 'SIGNIN' : 'You are logged in!'}\n        size={loggedIn && 'small'}\n        gutterBottom\n      />\n      <Formik\n        initialValues={initialValues}\n        validationSchema={validationSchema}\n        onSubmit={submitHandler}\n        validateOnMount\n        enableReinitialize\n      >\n        {(formik) => (\n          <Form>\n            <div className={classes.formControl}>\n              <FormikTextField\n                fieldName=\"email\"\n                type=\"email\"\n                id=\"email\"\n                name=\"email\"\n                label=\"Enter your email\"\n                variant=\"outlined\"\n                disabled={loggedIn}\n              />\n            </div>\n            <div className={classes.formControl}>\n              <FormikTextField\n                fieldName=\"password\"\n                type={showPassword ? 'text' : 'password'}\n                id=\"password\"\n                name=\"password\"\n                label=\"Enter your password\"\n                variant=\"outlined\"\n                disabled={loggedIn}\n                adornment={\n                  <ShowPasswordAdornment\n                    showPassword={showPassword}\n                    toggleShowPassword={toggleShowPassword}\n                  />\n                }\n                adornmentPosition=\"end\"\n              />\n              <Link\n                component={Rlink}\n                to=\"/pages/1\"\n                align=\"left\"\n                color=\"textSecondary\"\n                disabled={loggedIn}\n              >\n                <Typography\n                  variant=\"body2\"\n                  color=\"textSecondary\"\n                  align=\"left\"\n                  gutterBottom\n                  paragraph\n                  className={classes.passwordreset}\n                >\n                  Forgot Password?\n                </Typography>\n              </Link>\n            </div>\n            <BigButton\n              type=\"submit\"\n              disabled={!formik.isValid || formik.isSubmitting || loggedIn}\n            >\n              LOGIN\n            </BigButton>\n          </Form>\n        )}\n      </Formik>\n    </Paper>\n  );\n};\n\nexport default LoginForm;\n"]},"metadata":{},"sourceType":"module"}
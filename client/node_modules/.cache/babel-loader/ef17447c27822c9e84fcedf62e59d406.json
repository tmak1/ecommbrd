{"ast":null,"code":"import { VALIDATE_SHIPPING_FAILED, VALIDATE_SHIPPING_SUCCESS, VALIDATE_PAYMENT_FAILED, VALIDATE_PAYMENT_SUCCESS, REMOVE_SELECTED_SHIPPING, REMOVE_SELECTED_PAYMENT } from '../actions/checkoutActions';\n\nconst updateLocalStorage = (item, itemType) => {\n  let shoppingapp = localStorage.getItem('shoppingapp');\n\n  if (shoppingapp) {\n    shoppingapp = JSON.parse(shoppingapp);\n\n    if (item) {\n      return localStorage.setItem('shoppingapp', JSON.stringify({ ...shoppingapp,\n        [itemType]: item\n      }));\n    }\n\n    delete shoppingapp[itemType];\n    return localStorage.setItem('shoppingapp', JSON.stringify(shoppingapp));\n  }\n\n  if (item) {\n    localStorage.setItem('shoppingapp', JSON.stringify({\n      [itemType]: item\n    }));\n  }\n};\n\nconst validateForm = (item, ignoreFields) => {\n  let errorText;\n  const formError = Object.entries(item).some(([key, val]) => {\n    if (ignoreFields.indexOf(key) === -1) {\n      return val.toString().trim() === '';\n    }\n\n    return null;\n  });\n\n  if (formError) {\n    errorText = 'One or more fields missing';\n    return errorText;\n  }\n};\n\nexport const validateShipping = (shipping, ignoreFields = []) => (dispatch, getState) => {\n  const errorText = validateForm(shipping, ignoreFields);\n\n  if (errorText) {\n    return dispatch({\n      type: VALIDATE_SHIPPING_FAILED,\n      payload: errorText\n    });\n  }\n\n  dispatch({\n    type: VALIDATE_SHIPPING_SUCCESS,\n    payload: shipping\n  });\n  updateLocalStorage(getState().checkout.selectedshipping, 'selectedshipping');\n};\nexport const validatePayment = (payment, ignoreFields = []) => (dispatch, getState) => {\n  const errorText = validateForm(payment, ignoreFields);\n\n  if (errorText) {\n    return dispatch({\n      type: VALIDATE_PAYMENT_FAILED,\n      payload: errorText\n    });\n  }\n\n  dispatch({\n    type: VALIDATE_PAYMENT_SUCCESS,\n    payload: payment\n  });\n  updateLocalStorage(getState().checkout.selectedpayment, 'selectedpayment');\n};\nexport const removeSelectedShipping = () => (dispatch, getState) => {\n  dispatch({\n    type: REMOVE_SELECTED_SHIPPING\n  });\n  updateLocalStorage(getState().checkout.selectedshipping, 'selectedshipping');\n};\nexport const removeSelectedPayment = () => (dispatch, getState) => {\n  dispatch({\n    type: REMOVE_SELECTED_PAYMENT\n  });\n  updateLocalStorage(getState().checkout.selectedpayment, 'selectedpayment');\n};","map":{"version":3,"sources":["/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/server/client/src/redux/actionCreators/checkoutActionCreators.js"],"names":["VALIDATE_SHIPPING_FAILED","VALIDATE_SHIPPING_SUCCESS","VALIDATE_PAYMENT_FAILED","VALIDATE_PAYMENT_SUCCESS","REMOVE_SELECTED_SHIPPING","REMOVE_SELECTED_PAYMENT","updateLocalStorage","item","itemType","shoppingapp","localStorage","getItem","JSON","parse","setItem","stringify","validateForm","ignoreFields","errorText","formError","Object","entries","some","key","val","indexOf","toString","trim","validateShipping","shipping","dispatch","getState","type","payload","checkout","selectedshipping","validatePayment","payment","selectedpayment","removeSelectedShipping","removeSelectedPayment"],"mappings":"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","sourcesContent":["import {\n  VALIDATE_SHIPPING_FAILED,\n  VALIDATE_SHIPPING_SUCCESS,\n  VALIDATE_PAYMENT_FAILED,\n  VALIDATE_PAYMENT_SUCCESS,\n  REMOVE_SELECTED_SHIPPING,\n  REMOVE_SELECTED_PAYMENT,\n} from '../actions/checkoutActions';\n\nconst updateLocalStorage = (item, itemType) => {\n  let shoppingapp = localStorage.getItem('shoppingapp');\n  if (shoppingapp) {\n    shoppingapp = JSON.parse(shoppingapp);\n    if (item) {\n      return localStorage.setItem(\n        'shoppingapp',\n        JSON.stringify({\n          ...shoppingapp,\n          [itemType]: item,\n        })\n      );\n    }\n    delete shoppingapp[itemType];\n    return localStorage.setItem('shoppingapp', JSON.stringify(shoppingapp));\n  }\n  if (item) {\n    localStorage.setItem('shoppingapp', JSON.stringify({ [itemType]: item }));\n  }\n};\n\nconst validateForm = (item, ignoreFields) => {\n  let errorText;\n  const formError = Object.entries(item).some(([key, val]) => {\n    if (ignoreFields.indexOf(key) === -1) {\n      return val.toString().trim() === '';\n    }\n    return null;\n  });\n  if (formError) {\n    errorText = 'One or more fields missing';\n    return errorText;\n  }\n};\n\nexport const validateShipping =\n  (shipping, ignoreFields = []) =>\n  (dispatch, getState) => {\n    const errorText = validateForm(shipping, ignoreFields);\n    if (errorText) {\n      return dispatch({\n        type: VALIDATE_SHIPPING_FAILED,\n        payload: errorText,\n      });\n    }\n    dispatch({ type: VALIDATE_SHIPPING_SUCCESS, payload: shipping });\n    updateLocalStorage(\n      getState().checkout.selectedshipping,\n      'selectedshipping'\n    );\n  };\n\nexport const validatePayment =\n  (payment, ignoreFields = []) =>\n  (dispatch, getState) => {\n    const errorText = validateForm(payment, ignoreFields);\n    if (errorText) {\n      return dispatch({\n        type: VALIDATE_PAYMENT_FAILED,\n        payload: errorText,\n      });\n    }\n    dispatch({ type: VALIDATE_PAYMENT_SUCCESS, payload: payment });\n    updateLocalStorage(getState().checkout.selectedpayment, 'selectedpayment');\n  };\n\nexport const removeSelectedShipping = () => (dispatch, getState) => {\n  dispatch({ type: REMOVE_SELECTED_SHIPPING });\n  updateLocalStorage(getState().checkout.selectedshipping, 'selectedshipping');\n};\n\nexport const removeSelectedPayment = () => (dispatch, getState) => {\n  dispatch({ type: REMOVE_SELECTED_PAYMENT });\n  updateLocalStorage(getState().checkout.selectedpayment, 'selectedpayment');\n};\n"]},"metadata":{},"sourceType":"module"}
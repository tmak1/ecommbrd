{"ast":null,"code":"import _regeneratorRuntime from\"/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{USER_AUTH_REQUEST,USER_AUTH_SUCCESS,USER_AUTH_FAILURE,USER_LOGOUT,USER_UPDATE_REQUEST,USER_UPDATE_SUCCESS,USER_UPDATE_FAILURE,USER_CHANGED_NAME,REMOVE_UPDATED_USER,USER_LIST_REQUEST,USER_LIST_SUCCESS,USER_LIST_FAILURE,USER_DELETE_REQUEST,USER_DELETE_SUCCESS,USER_DELETE_FAILURE,USER_UPDATE_BYADMIN_REQUEST,USER_UPDATE_BYADMIN_SUCCESS,USER_UPDATE_BYADMIN_FAILURE}from'../actions/userActions';import{sendRequest}from'../../helpers';import{removeAllShippingAddresses}from'./shippingActionCreators';import{removeAllPaymentMethods}from'./paymentActionCreators';import{removeSelectedShipping,removeSelectedPayment}from'./checkoutActionCreators';import{clearCart}from'./cartActionCreators';var updateLocalStorage=function updateLocalStorage(user,userType){var shoppingapp=localStorage.getItem('shoppingapp');if(shoppingapp){shoppingapp=JSON.parse(shoppingapp);if(user){return localStorage.setItem('shoppingapp',JSON.stringify(_objectSpread(_objectSpread({},shoppingapp),{},_defineProperty({},userType,user))));}delete shoppingapp[userType];return localStorage.setItem('shoppingapp',JSON.stringify(shoppingapp));}if(user){localStorage.setItem('shoppingapp',JSON.stringify(_defineProperty({},userType,user)));}};export var authenticateUser=function authenticateUser(loginInfo,operation){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch,getState){var _yield$sendRequest,error,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;dispatch({type:USER_AUTH_REQUEST});_context.next=4;return sendRequest(\"\".concat(process.env.REACT_APP_API_URL,\"/users/\").concat(operation),'POST',{'Content-Type':'application/json'},JSON.stringify(loginInfo));case 4:_yield$sendRequest=_context.sent;error=_yield$sendRequest.error;data=_yield$sendRequest.data;if(!error){_context.next=9;break;}return _context.abrupt(\"return\",dispatch({type:USER_AUTH_FAILURE,payload:error}));case 9:dispatch({type:USER_AUTH_SUCCESS,payload:data});updateLocalStorage(getState().userAuth.loggedInUser,'loggedInUser');_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 16:case\"end\":return _context.stop();}}},_callee,null,[[0,13]]);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();};export var logoutUser=function logoutUser(){return function(dispatch,getState){try{dispatch({type:USER_LOGOUT});dispatch({type:REMOVE_UPDATED_USER});updateLocalStorage(getState().userAuth.loggedInUser,'loggedInUser');updateLocalStorage(getState().userUpdate.updatedUser,'updatedUser');dispatch(removeAllShippingAddresses());dispatch(removeAllPaymentMethods());dispatch(removeSelectedShipping());dispatch(removeSelectedPayment());dispatch(clearCart());}catch(error){console.log(error);}};};export var updateUser=function updateUser(userId,token,updateInfo){var onSuccess=arguments.length>3&&arguments[3]!==undefined?arguments[3]:function(){};return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch,getState){var _yield$sendRequest2,error,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;dispatch({type:USER_UPDATE_REQUEST});_context2.next=4;return sendRequest(\"\".concat(process.env.REACT_APP_API_URL,\"/users/\").concat(userId),'PATCH',{'Content-Type':'application/json',Authorization:\"Bearer \".concat(token)},JSON.stringify(updateInfo));case 4:_yield$sendRequest2=_context2.sent;error=_yield$sendRequest2.error;data=_yield$sendRequest2.data;if(!error){_context2.next=9;break;}return _context2.abrupt(\"return\",dispatch({type:USER_UPDATE_FAILURE,payload:error}));case 9:dispatch({type:USER_UPDATE_SUCCESS,payload:data});//updateLocalStorage(getState().userUpdate.updatedUser, 'updatedUser');\nonSuccess();_context2.next=16;break;case 13:_context2.prev=13;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 16:case\"end\":return _context2.stop();}}},_callee2,null,[[0,13]]);}));return function(_x3,_x4){return _ref2.apply(this,arguments);};}();};export var userChangedName=function userChangedName(name){return function(dispatch,getState){dispatch({type:USER_CHANGED_NAME,payload:name});updateLocalStorage(getState().userAuth.loggedInUser,'loggedInUser');};};export var listUsers=function listUsers(token){var searchTerm=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';var page=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'';var perPage=arguments.length>3&&arguments[3]!==undefined?arguments[3]:'';return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch,getState){var _yield$sendRequest3,error,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;dispatch({type:USER_LIST_REQUEST});_context3.next=4;return sendRequest(\"\".concat(process.env.REACT_APP_API_URL,\"/users?userId=\").concat(searchTerm,\"&page=\").concat(page,\"&perPage=\").concat(perPage),'GET',{Authorization:\"Bearer \".concat(token)});case 4:_yield$sendRequest3=_context3.sent;error=_yield$sendRequest3.error;data=_yield$sendRequest3.data;if(!error){_context3.next=9;break;}return _context3.abrupt(\"return\",dispatch({type:USER_LIST_FAILURE,payload:error}));case 9:dispatch({type:USER_LIST_SUCCESS,payload:data});_context3.next=15;break;case 12:_context3.prev=12;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);case 15:case\"end\":return _context3.stop();}}},_callee3,null,[[0,12]]);}));return function(_x5,_x6){return _ref3.apply(this,arguments);};}();};export var deleteUser=function deleteUser(userId,token,onSuccess){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch,getState){var _yield$sendRequest4,error,data;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;dispatch({type:USER_DELETE_REQUEST});_context4.next=4;return sendRequest(\"\".concat(process.env.REACT_APP_API_URL,\"/users/\").concat(userId),'DELETE',{Authorization:\"Bearer \".concat(token)});case 4:_yield$sendRequest4=_context4.sent;error=_yield$sendRequest4.error;data=_yield$sendRequest4.data;if(!error){_context4.next=9;break;}return _context4.abrupt(\"return\",dispatch({type:USER_DELETE_FAILURE,payload:error}));case 9:dispatch({type:USER_DELETE_SUCCESS,payload:data});onSuccess();_context4.next=16;break;case 13:_context4.prev=13;_context4.t0=_context4[\"catch\"](0);console.log(_context4.t0);case 16:case\"end\":return _context4.stop();}}},_callee4,null,[[0,13]]);}));return function(_x7,_x8){return _ref4.apply(this,arguments);};}();};export var updateUserByAdmin=function updateUserByAdmin(userId,token,updateInfo){var onSuccess=arguments.length>3&&arguments[3]!==undefined?arguments[3]:function(){};return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch,getState){var _yield$sendRequest5,error,data;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;dispatch({type:USER_UPDATE_BYADMIN_REQUEST});_context5.next=4;return sendRequest(\"\".concat(process.env.REACT_APP_API_URL,\"/users/\").concat(userId),'PATCH',{'Content-Type':'application/json',Authorization:\"Bearer \".concat(token)},JSON.stringify(updateInfo));case 4:_yield$sendRequest5=_context5.sent;error=_yield$sendRequest5.error;data=_yield$sendRequest5.data;if(!error){_context5.next=9;break;}return _context5.abrupt(\"return\",dispatch({type:USER_UPDATE_BYADMIN_FAILURE,payload:error}));case 9:dispatch({type:USER_UPDATE_BYADMIN_SUCCESS,payload:data});//updateLocalStorage(getState().userUpdate.updatedUser, 'updatedUser');\nonSuccess();_context5.next=16;break;case 13:_context5.prev=13;_context5.t0=_context5[\"catch\"](0);console.log(_context5.t0);case 16:case\"end\":return _context5.stop();}}},_callee5,null,[[0,13]]);}));return function(_x9,_x10){return _ref5.apply(this,arguments);};}();};","map":{"version":3,"sources":["/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/client/src/redux/actionCreators/userActionCreators.js"],"names":["USER_AUTH_REQUEST","USER_AUTH_SUCCESS","USER_AUTH_FAILURE","USER_LOGOUT","USER_UPDATE_REQUEST","USER_UPDATE_SUCCESS","USER_UPDATE_FAILURE","USER_CHANGED_NAME","REMOVE_UPDATED_USER","USER_LIST_REQUEST","USER_LIST_SUCCESS","USER_LIST_FAILURE","USER_DELETE_REQUEST","USER_DELETE_SUCCESS","USER_DELETE_FAILURE","USER_UPDATE_BYADMIN_REQUEST","USER_UPDATE_BYADMIN_SUCCESS","USER_UPDATE_BYADMIN_FAILURE","sendRequest","removeAllShippingAddresses","removeAllPaymentMethods","removeSelectedShipping","removeSelectedPayment","clearCart","updateLocalStorage","user","userType","shoppingapp","localStorage","getItem","JSON","parse","setItem","stringify","authenticateUser","loginInfo","operation","dispatch","getState","type","process","env","REACT_APP_API_URL","error","data","payload","userAuth","loggedInUser","console","log","logoutUser","userUpdate","updatedUser","updateUser","userId","token","updateInfo","onSuccess","Authorization","userChangedName","name","listUsers","searchTerm","page","perPage","deleteUser","updateUserByAdmin"],"mappings":"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","sourcesContent":["import {\n  USER_AUTH_REQUEST,\n  USER_AUTH_SUCCESS,\n  USER_AUTH_FAILURE,\n  USER_LOGOUT,\n  USER_UPDATE_REQUEST,\n  USER_UPDATE_SUCCESS,\n  USER_UPDATE_FAILURE,\n  USER_CHANGED_NAME,\n  REMOVE_UPDATED_USER,\n  USER_LIST_REQUEST,\n  USER_LIST_SUCCESS,\n  USER_LIST_FAILURE,\n  USER_DELETE_REQUEST,\n  USER_DELETE_SUCCESS,\n  USER_DELETE_FAILURE,\n  USER_UPDATE_BYADMIN_REQUEST,\n  USER_UPDATE_BYADMIN_SUCCESS,\n  USER_UPDATE_BYADMIN_FAILURE,\n} from '../actions/userActions';\nimport { sendRequest } from '../../helpers';\nimport { removeAllShippingAddresses } from './shippingActionCreators';\nimport { removeAllPaymentMethods } from './paymentActionCreators';\nimport {\n  removeSelectedShipping,\n  removeSelectedPayment,\n} from './checkoutActionCreators';\n\nimport { clearCart } from './cartActionCreators';\n\nconst updateLocalStorage = (user, userType) => {\n  let shoppingapp = localStorage.getItem('shoppingapp');\n  if (shoppingapp) {\n    shoppingapp = JSON.parse(shoppingapp);\n    if (user) {\n      return localStorage.setItem(\n        'shoppingapp',\n        JSON.stringify({ ...shoppingapp, [userType]: user })\n      );\n    }\n    delete shoppingapp[userType];\n    return localStorage.setItem('shoppingapp', JSON.stringify(shoppingapp));\n  }\n  if (user) {\n    localStorage.setItem('shoppingapp', JSON.stringify({ [userType]: user }));\n  }\n};\n\nexport const authenticateUser =\n  (loginInfo, operation) => async (dispatch, getState) => {\n    try {\n      dispatch({ type: USER_AUTH_REQUEST });\n      const { error, data } = await sendRequest(\n        `${process.env.REACT_APP_API_URL}/users/${operation}`,\n        'POST',\n        { 'Content-Type': 'application/json' },\n        JSON.stringify(loginInfo)\n      );\n      if (error) {\n        return dispatch({ type: USER_AUTH_FAILURE, payload: error });\n      }\n      dispatch({ type: USER_AUTH_SUCCESS, payload: data });\n      updateLocalStorage(getState().userAuth.loggedInUser, 'loggedInUser');\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\nexport const logoutUser = () => (dispatch, getState) => {\n  try {\n    dispatch({ type: USER_LOGOUT });\n    dispatch({ type: REMOVE_UPDATED_USER });\n    updateLocalStorage(getState().userAuth.loggedInUser, 'loggedInUser');\n    updateLocalStorage(getState().userUpdate.updatedUser, 'updatedUser');\n\n    dispatch(removeAllShippingAddresses());\n    dispatch(removeAllPaymentMethods());\n    dispatch(removeSelectedShipping());\n    dispatch(removeSelectedPayment());\n    dispatch(clearCart());\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nexport const updateUser =\n  (userId, token, updateInfo, onSuccess = () => {}) =>\n  async (dispatch, getState) => {\n    try {\n      dispatch({ type: USER_UPDATE_REQUEST });\n      const { error, data } = await sendRequest(\n        `${process.env.REACT_APP_API_URL}/users/${userId}`,\n        'PATCH',\n        {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`,\n        },\n        JSON.stringify(updateInfo)\n      );\n      if (error) {\n        return dispatch({ type: USER_UPDATE_FAILURE, payload: error });\n      }\n      dispatch({ type: USER_UPDATE_SUCCESS, payload: data });\n      //updateLocalStorage(getState().userUpdate.updatedUser, 'updatedUser');\n      onSuccess();\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\nexport const userChangedName = (name) => (dispatch, getState) => {\n  dispatch({ type: USER_CHANGED_NAME, payload: name });\n  updateLocalStorage(getState().userAuth.loggedInUser, 'loggedInUser');\n};\n\nexport const listUsers =\n  (token, searchTerm = '', page = '', perPage = '') =>\n  async (dispatch, getState) => {\n    try {\n      dispatch({ type: USER_LIST_REQUEST });\n      const { error, data } = await sendRequest(\n        `${process.env.REACT_APP_API_URL}/users?userId=${searchTerm}&page=${page}&perPage=${perPage}`,\n        'GET',\n        {\n          Authorization: `Bearer ${token}`,\n        }\n      );\n      if (error) {\n        return dispatch({ type: USER_LIST_FAILURE, payload: error });\n      }\n      dispatch({ type: USER_LIST_SUCCESS, payload: data });\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\nexport const deleteUser =\n  (userId, token, onSuccess) => async (dispatch, getState) => {\n    try {\n      dispatch({ type: USER_DELETE_REQUEST });\n      const { error, data } = await sendRequest(\n        `${process.env.REACT_APP_API_URL}/users/${userId}`,\n        'DELETE',\n        {\n          Authorization: `Bearer ${token}`,\n        }\n      );\n      if (error) {\n        return dispatch({ type: USER_DELETE_FAILURE, payload: error });\n      }\n      dispatch({ type: USER_DELETE_SUCCESS, payload: data });\n      onSuccess();\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\nexport const updateUserByAdmin =\n  (userId, token, updateInfo, onSuccess = () => {}) =>\n  async (dispatch, getState) => {\n    try {\n      dispatch({ type: USER_UPDATE_BYADMIN_REQUEST });\n      const { error, data } = await sendRequest(\n        `${process.env.REACT_APP_API_URL}/users/${userId}`,\n        'PATCH',\n        {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`,\n        },\n        JSON.stringify(updateInfo)\n      );\n      if (error) {\n        return dispatch({ type: USER_UPDATE_BYADMIN_FAILURE, payload: error });\n      }\n      dispatch({ type: USER_UPDATE_BYADMIN_SUCCESS, payload: data });\n      //updateLocalStorage(getState().userUpdate.updatedUser, 'updatedUser');\n      onSuccess();\n    } catch (error) {\n      console.log(error);\n    }\n  };\n"]},"metadata":{},"sourceType":"module"}
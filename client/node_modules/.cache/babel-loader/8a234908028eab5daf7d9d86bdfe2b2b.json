{"ast":null,"code":"var _jsxFileName = \"/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/client/src/components/products/pages/Cart.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { useLocation, useParams, useHistory } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport AlertMessage from '../../shared/ui/AlertMessage';\nimport { addToCart, removeFromCart } from '../../../redux/actionCreators/cartActionCreators';\nimport SkeletonCart from '../../shared/ui/skeletons/SkeletonCart';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Hidden from '@material-ui/core/Hidden';\nimport Grid from '@material-ui/core/Grid';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport Table from '@material-ui/core/Table';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableRow from '@material-ui/core/TableRow';\nimport TableCell from '@material-ui/core/TableCell';\nimport Paper from '@material-ui/core/Paper';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport IconButton from '@material-ui/core/IconButton';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Zoom from '@material-ui/core/Zoom';\nimport PageHeading from '../../shared/ui/PageHeading';\nimport CartTotal from '../components/CartTotal';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  root: {\n    [theme.breakpoints.down('lg')]: {\n      justifyContent: 'flex-end'\n    }\n  },\n  paper: {\n    width: theme.spacing(20),\n    height: theme.spacing(13)\n  },\n  media: {\n    width: '100%',\n    height: '100%'\n  },\n  select: {\n    [theme.breakpoints.down('xs')]: {\n      width: theme.spacing(4),\n      height: theme.spacing(4),\n      fontSize: '13px',\n      '&>svg': {\n        display: 'none'\n      }\n    }\n  }\n}));\n\nconst Cart = () => {\n  _s();\n\n  const classes = useStyles();\n  const history = useHistory();\n  const pid = useParams().pid;\n  const location = useLocation().search;\n  const query = location ? new URLSearchParams(location) : null;\n  const qty = (query === null || query === void 0 ? void 0 : query.has('qty')) ? Number(query.get('qty')) : 1;\n  const dispatch = useDispatch();\n  const {\n    loggedInUser\n  } = useSelector(state => state.userAuth);\n  const {\n    loading,\n    error,\n    cartItems\n  } = useSelector(state => state.cart);\n  const [showTotalHeader, setShowTotalHeader] = useState(false);\n  const [subTotal, setSubTotal] = useState(0);\n  const addToCartHandler = useCallback((pid, qty) => {\n    dispatch(addToCart(pid, qty));\n  }, [dispatch]);\n\n  const removeFromCartHandler = pid => {\n    dispatch(removeFromCart(pid));\n  };\n\n  const calculateSubTotal = cartItems => {\n    let total = cartItems.reduce((acc, product) => {\n      return product.price * product.qty + acc;\n    }, 0).toFixed(2);\n    setSubTotal(total);\n  };\n\n  const checkoutHandler = () => {\n    history.push(loggedInUser ? '/checkout' : `/auth?redirect=checkout`);\n  };\n\n  useEffect(() => {\n    if (pid && qty) {\n      addToCartHandler(pid, qty);\n    }\n  }, [pid, qty, addToCartHandler]);\n  useEffect(() => {\n    if (cartItems) {\n      setShowTotalHeader(cartItems.some(item => item.qty > 1));\n      calculateSubTotal(cartItems);\n    }\n  }, [cartItems]);\n\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(PageHeading, {\n        text: \"SHOPPING CART\",\n        gutterBottom: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(SkeletonCart, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(PageHeading, {\n      text: \"SHOPPING CART\",\n      gutterBottom: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(AlertMessage, {\n      message: error,\n      severity: \"error\",\n      variant: \"outlined\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 9\n    }, this), cartItems === null || cartItems === undefined ? null : cartItems.length <= 0 ? /*#__PURE__*/_jsxDEV(AlertMessage, {\n      message: \"CART IS EMPTY\",\n      severity: \"info\",\n      variant: \"outlined\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      spacing: 1,\n      className: classes.root,\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        md: 9,\n        xs: 12,\n        children: /*#__PURE__*/_jsxDEV(TableContainer, {\n          children: /*#__PURE__*/_jsxDEV(Table, {\n            children: [/*#__PURE__*/_jsxDEV(TableHead, {\n              children: /*#__PURE__*/_jsxDEV(TableRow, {\n                children: [/*#__PURE__*/_jsxDEV(Hidden, {\n                  xsDown: true,\n                  children: /*#__PURE__*/_jsxDEV(TableCell, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 142,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 141,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  children: \"Name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 144,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  children: \"Price\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 145,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  align: \"center\",\n                  children: \"Qty\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 146,\n                  columnNumber: 21\n                }, this), showTotalHeader && /*#__PURE__*/_jsxDEV(Hidden, {\n                  xsDown: true,\n                  children: /*#__PURE__*/_jsxDEV(TableCell, {\n                    children: \"Total\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 149,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 148,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 152,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 140,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n              children: cartItems === null || cartItems === void 0 ? void 0 : cartItems.map(({\n                id,\n                name,\n                price,\n                imageUrl,\n                countInStock,\n                qty\n              }) => {\n                return /*#__PURE__*/_jsxDEV(TableRow, {\n                  children: [/*#__PURE__*/_jsxDEV(Hidden, {\n                    xsDown: true,\n                    children: /*#__PURE__*/_jsxDEV(TableCell, {\n                      children: /*#__PURE__*/_jsxDEV(Paper, {\n                        className: classes.paper,\n                        elevation: 0,\n                        children: /*#__PURE__*/_jsxDEV(CardMedia, {\n                          className: classes.media,\n                          image: imageUrl || '/images/placeholder.jpg',\n                          title: name\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 163,\n                          columnNumber: 33\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 162,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 161,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 160,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                    children: name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 171,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                    children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: [\"$\", price]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 173,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 172,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                    children: /*#__PURE__*/_jsxDEV(FormControl, {\n                      variant: \"outlined\",\n                      children: /*#__PURE__*/_jsxDEV(Select, {\n                        className: classes.select,\n                        native: true,\n                        onChange: event => addToCartHandler(id, Number(event.target.value)),\n                        value: qty,\n                        children: [...Array(countInStock).keys()].map(num => /*#__PURE__*/_jsxDEV(\"option\", {\n                          value: num + 1,\n                          children: num + 1\n                        }, num, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 189,\n                          columnNumber: 35\n                        }, this))\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 177,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 176,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 175,\n                    columnNumber: 27\n                  }, this), showTotalHeader && /*#__PURE__*/_jsxDEV(Hidden, {\n                    xsDown: true,\n                    children: /*#__PURE__*/_jsxDEV(TableCell, {\n                      children: qty > 1 ? /*#__PURE__*/_jsxDEV(\"strong\", {\n                        children: [\"$\", (price * qty).toFixed(2)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 200,\n                        columnNumber: 35\n                      }, this) : ''\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 198,\n                      columnNumber: 31\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 197,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                    children: /*#__PURE__*/_jsxDEV(Tooltip, {\n                      TransitionComponent: Zoom,\n                      title: \"Remove item\",\n                      children: /*#__PURE__*/_jsxDEV(IconButton, {\n                        color: \"inherit\",\n                        size: \"small\",\n                        onClick: () => removeFromCartHandler(id),\n                        children: /*#__PURE__*/_jsxDEV(DeleteIcon, {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 217,\n                          columnNumber: 33\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 212,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 208,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 207,\n                    columnNumber: 27\n                  }, this)]\n                }, id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 159,\n                  columnNumber: 25\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        md: 3,\n        sm: 7,\n        xs: 12,\n        children: /*#__PURE__*/_jsxDEV(CartTotal, {\n          subTotal: subTotal,\n          totalQty: cartItems === null || cartItems === void 0 ? void 0 : cartItems.length,\n          checkoutHandler: checkoutHandler\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Cart, \"ueZbfUyJpJhPNaQBBWcKGL/ZD58=\", false, function () {\n  return [useStyles, useHistory, useParams, useLocation, useDispatch, useSelector, useSelector];\n});\n\n_c = Cart;\nexport default Cart;\n\nvar _c;\n\n$RefreshReg$(_c, \"Cart\");","map":{"version":3,"sources":["/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/client/src/components/products/pages/Cart.js"],"names":["React","useState","useEffect","useCallback","useLocation","useParams","useHistory","useDispatch","useSelector","AlertMessage","addToCart","removeFromCart","SkeletonCart","makeStyles","Hidden","Grid","TableContainer","Table","TableHead","TableBody","TableRow","TableCell","Paper","CardMedia","IconButton","FormControl","Select","Tooltip","Zoom","PageHeading","CartTotal","DeleteIcon","useStyles","theme","root","breakpoints","down","justifyContent","paper","width","spacing","height","media","select","fontSize","display","Cart","classes","history","pid","location","search","query","URLSearchParams","qty","has","Number","get","dispatch","loggedInUser","state","userAuth","loading","error","cartItems","cart","showTotalHeader","setShowTotalHeader","subTotal","setSubTotal","addToCartHandler","removeFromCartHandler","calculateSubTotal","total","reduce","acc","product","price","toFixed","checkoutHandler","push","some","item","undefined","length","map","id","name","imageUrl","countInStock","event","target","value","Array","keys","num"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { useLocation, useParams, useHistory } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport AlertMessage from '../../shared/ui/AlertMessage';\n\nimport {\n  addToCart,\n  removeFromCart,\n} from '../../../redux/actionCreators/cartActionCreators';\n\nimport SkeletonCart from '../../shared/ui/skeletons/SkeletonCart';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport Hidden from '@material-ui/core/Hidden';\nimport Grid from '@material-ui/core/Grid';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport Table from '@material-ui/core/Table';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableRow from '@material-ui/core/TableRow';\nimport TableCell from '@material-ui/core/TableCell';\nimport Paper from '@material-ui/core/Paper';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport IconButton from '@material-ui/core/IconButton';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Zoom from '@material-ui/core/Zoom';\n\nimport PageHeading from '../../shared/ui/PageHeading';\nimport CartTotal from '../components/CartTotal';\n\nimport DeleteIcon from '@material-ui/icons/Delete';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    [theme.breakpoints.down('lg')]: {\n      justifyContent: 'flex-end',\n    },\n  },\n  paper: {\n    width: theme.spacing(20),\n    height: theme.spacing(13),\n  },\n  media: {\n    width: '100%',\n    height: '100%',\n  },\n  select: {\n    [theme.breakpoints.down('xs')]: {\n      width: theme.spacing(4),\n      height: theme.spacing(4),\n      fontSize: '13px',\n      '&>svg': {\n        display: 'none',\n      },\n    },\n  },\n}));\n\nconst Cart = () => {\n  const classes = useStyles();\n  const history = useHistory();\n  const pid = useParams().pid;\n\n  const location = useLocation().search;\n  const query = location ? new URLSearchParams(location) : null;\n  const qty = query?.has('qty') ? Number(query.get('qty')) : 1;\n\n  const dispatch = useDispatch();\n  const { loggedInUser } = useSelector((state) => state.userAuth);\n  const { loading, error, cartItems } = useSelector((state) => state.cart);\n  const [showTotalHeader, setShowTotalHeader] = useState(false);\n  const [subTotal, setSubTotal] = useState(0);\n\n  const addToCartHandler = useCallback(\n    (pid, qty) => {\n      dispatch(addToCart(pid, qty));\n    },\n    [dispatch]\n  );\n  const removeFromCartHandler = (pid) => {\n    dispatch(removeFromCart(pid));\n  };\n\n  const calculateSubTotal = (cartItems) => {\n    let total = cartItems\n      .reduce((acc, product) => {\n        return product.price * product.qty + acc;\n      }, 0)\n      .toFixed(2);\n    setSubTotal(total);\n  };\n\n  const checkoutHandler = () => {\n    history.push(loggedInUser ? '/checkout' : `/auth?redirect=checkout`);\n  };\n\n  useEffect(() => {\n    if (pid && qty) {\n      addToCartHandler(pid, qty);\n    }\n  }, [pid, qty, addToCartHandler]);\n\n  useEffect(() => {\n    if (cartItems) {\n      setShowTotalHeader(cartItems.some((item) => item.qty > 1));\n      calculateSubTotal(cartItems);\n    }\n  }, [cartItems]);\n\n  if (loading) {\n    return (\n      <>\n        <PageHeading text=\"SHOPPING CART\" gutterBottom />\n        <SkeletonCart />\n      </>\n    );\n  }\n  return (\n    <>\n      <PageHeading text=\"SHOPPING CART\" gutterBottom />\n      {error && (\n        <AlertMessage message={error} severity=\"error\" variant=\"outlined\" />\n      )}\n      {cartItems === null ||\n      cartItems === undefined ? null : cartItems.length <= 0 ? (\n        <AlertMessage\n          message=\"CART IS EMPTY\"\n          severity=\"info\"\n          variant=\"outlined\"\n        />\n      ) : (\n        <Grid container spacing={1} className={classes.root}>\n          <Grid item md={9} xs={12}>\n            <TableContainer>\n              <Table>\n                <TableHead>\n                  <TableRow>\n                    <Hidden xsDown>\n                      <TableCell></TableCell>\n                    </Hidden>\n                    <TableCell>Name</TableCell>\n                    <TableCell>Price</TableCell>\n                    <TableCell align=\"center\">Qty</TableCell>\n                    {showTotalHeader && (\n                      <Hidden xsDown>\n                        <TableCell>Total</TableCell>\n                      </Hidden>\n                    )}\n                    <TableCell></TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {cartItems?.map(\n                    ({ id, name, price, imageUrl, countInStock, qty }) => {\n                      return (\n                        <TableRow key={id}>\n                          <Hidden xsDown>\n                            <TableCell>\n                              <Paper className={classes.paper} elevation={0}>\n                                <CardMedia\n                                  className={classes.media}\n                                  image={imageUrl || '/images/placeholder.jpg'}\n                                  title={name}\n                                />\n                              </Paper>\n                            </TableCell>\n                          </Hidden>\n                          <TableCell>{name}</TableCell>\n                          <TableCell>\n                            <strong>${price}</strong>\n                          </TableCell>\n                          <TableCell>\n                            <FormControl variant=\"outlined\">\n                              <Select\n                                className={classes.select}\n                                native\n                                onChange={(event) =>\n                                  addToCartHandler(\n                                    id,\n                                    Number(event.target.value)\n                                  )\n                                }\n                                value={qty}\n                              >\n                                {[...Array(countInStock).keys()].map((num) => (\n                                  <option key={num} value={num + 1}>\n                                    {num + 1}\n                                  </option>\n                                ))}\n                              </Select>\n                            </FormControl>\n                          </TableCell>\n                          {showTotalHeader && (\n                            <Hidden xsDown>\n                              <TableCell>\n                                {qty > 1 ? (\n                                  <strong>${(price * qty).toFixed(2)}</strong>\n                                ) : (\n                                  ''\n                                )}\n                              </TableCell>\n                            </Hidden>\n                          )}\n                          <TableCell>\n                            <Tooltip\n                              TransitionComponent={Zoom}\n                              title=\"Remove item\"\n                            >\n                              <IconButton\n                                color=\"inherit\"\n                                size=\"small\"\n                                onClick={() => removeFromCartHandler(id)}\n                              >\n                                <DeleteIcon />\n                              </IconButton>\n                            </Tooltip>\n                          </TableCell>\n                        </TableRow>\n                      );\n                    }\n                  )}\n                </TableBody>\n              </Table>\n            </TableContainer>\n          </Grid>\n          <Grid item md={3} sm={7} xs={12}>\n            <CartTotal\n              subTotal={subTotal}\n              totalQty={cartItems?.length}\n              checkoutHandler={checkoutHandler}\n            />\n          </Grid>\n        </Grid>\n      )}\n    </>\n  );\n};\n\nexport default Cart;\n"]},"metadata":{},"sourceType":"module"}
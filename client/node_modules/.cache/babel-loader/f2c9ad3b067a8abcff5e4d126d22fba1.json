{"ast":null,"code":"import _slicedToArray from\"/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _defineProperty from\"/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{VALIDATE_SHIPPING_FAILED,VALIDATE_SHIPPING_SUCCESS,VALIDATE_PAYMENT_FAILED,VALIDATE_PAYMENT_SUCCESS,REMOVE_SELECTED_SHIPPING,REMOVE_SELECTED_PAYMENT}from'../actions/checkoutActions';var updateLocalStorage=function updateLocalStorage(item,itemType){var shoppingapp=localStorage.getItem('shoppingapp');if(shoppingapp){shoppingapp=JSON.parse(shoppingapp);if(item){return localStorage.setItem('shoppingapp',JSON.stringify(_objectSpread(_objectSpread({},shoppingapp),{},_defineProperty({},itemType,item))));}delete shoppingapp[itemType];return localStorage.setItem('shoppingapp',JSON.stringify(shoppingapp));}if(item){localStorage.setItem('shoppingapp',JSON.stringify(_defineProperty({},itemType,item)));}};var validateForm=function validateForm(item,ignoreFields){var errorText;var formError=Object.entries(item).some(function(_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],val=_ref2[1];if(ignoreFields.indexOf(key)===-1){return val.toString().trim()==='';}return null;});if(formError){errorText='One or more fields missing';return errorText;}};export var validateShipping=function validateShipping(shipping){var ignoreFields=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];return function(dispatch,getState){var errorText=validateForm(shipping,ignoreFields);if(errorText){return dispatch({type:VALIDATE_SHIPPING_FAILED,payload:errorText});}dispatch({type:VALIDATE_SHIPPING_SUCCESS,payload:shipping});updateLocalStorage(getState().checkout.selectedshipping,'selectedshipping');};};export var validatePayment=function validatePayment(payment){var ignoreFields=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];return function(dispatch,getState){var errorText=validateForm(payment,ignoreFields);if(errorText){return dispatch({type:VALIDATE_PAYMENT_FAILED,payload:errorText});}dispatch({type:VALIDATE_PAYMENT_SUCCESS,payload:payment});updateLocalStorage(getState().checkout.selectedpayment,'selectedpayment');};};export var removeSelectedShipping=function removeSelectedShipping(){return function(dispatch,getState){dispatch({type:REMOVE_SELECTED_SHIPPING});updateLocalStorage(getState().checkout.selectedshipping,'selectedshipping');};};export var removeSelectedPayment=function removeSelectedPayment(){return function(dispatch,getState){dispatch({type:REMOVE_SELECTED_PAYMENT});updateLocalStorage(getState().checkout.selectedpayment,'selectedpayment');};};","map":{"version":3,"sources":["/Users/tmak/Desktop/tei/udemy/brdtrv/ecomm/client/src/redux/actionCreators/checkoutActionCreators.js"],"names":["VALIDATE_SHIPPING_FAILED","VALIDATE_SHIPPING_SUCCESS","VALIDATE_PAYMENT_FAILED","VALIDATE_PAYMENT_SUCCESS","REMOVE_SELECTED_SHIPPING","REMOVE_SELECTED_PAYMENT","updateLocalStorage","item","itemType","shoppingapp","localStorage","getItem","JSON","parse","setItem","stringify","validateForm","ignoreFields","errorText","formError","Object","entries","some","key","val","indexOf","toString","trim","validateShipping","shipping","dispatch","getState","type","payload","checkout","selectedshipping","validatePayment","payment","selectedpayment","removeSelectedShipping","removeSelectedPayment"],"mappings":"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","sourcesContent":["import {\n  VALIDATE_SHIPPING_FAILED,\n  VALIDATE_SHIPPING_SUCCESS,\n  VALIDATE_PAYMENT_FAILED,\n  VALIDATE_PAYMENT_SUCCESS,\n  REMOVE_SELECTED_SHIPPING,\n  REMOVE_SELECTED_PAYMENT,\n} from '../actions/checkoutActions';\n\nconst updateLocalStorage = (item, itemType) => {\n  let shoppingapp = localStorage.getItem('shoppingapp');\n  if (shoppingapp) {\n    shoppingapp = JSON.parse(shoppingapp);\n    if (item) {\n      return localStorage.setItem(\n        'shoppingapp',\n        JSON.stringify({\n          ...shoppingapp,\n          [itemType]: item,\n        })\n      );\n    }\n    delete shoppingapp[itemType];\n    return localStorage.setItem('shoppingapp', JSON.stringify(shoppingapp));\n  }\n  if (item) {\n    localStorage.setItem('shoppingapp', JSON.stringify({ [itemType]: item }));\n  }\n};\n\nconst validateForm = (item, ignoreFields) => {\n  let errorText;\n  const formError = Object.entries(item).some(([key, val]) => {\n    if (ignoreFields.indexOf(key) === -1) {\n      return val.toString().trim() === '';\n    }\n    return null;\n  });\n  if (formError) {\n    errorText = 'One or more fields missing';\n    return errorText;\n  }\n};\n\nexport const validateShipping =\n  (shipping, ignoreFields = []) =>\n  (dispatch, getState) => {\n    const errorText = validateForm(shipping, ignoreFields);\n    if (errorText) {\n      return dispatch({\n        type: VALIDATE_SHIPPING_FAILED,\n        payload: errorText,\n      });\n    }\n    dispatch({ type: VALIDATE_SHIPPING_SUCCESS, payload: shipping });\n    updateLocalStorage(\n      getState().checkout.selectedshipping,\n      'selectedshipping'\n    );\n  };\n\nexport const validatePayment =\n  (payment, ignoreFields = []) =>\n  (dispatch, getState) => {\n    const errorText = validateForm(payment, ignoreFields);\n    if (errorText) {\n      return dispatch({\n        type: VALIDATE_PAYMENT_FAILED,\n        payload: errorText,\n      });\n    }\n    dispatch({ type: VALIDATE_PAYMENT_SUCCESS, payload: payment });\n    updateLocalStorage(getState().checkout.selectedpayment, 'selectedpayment');\n  };\n\nexport const removeSelectedShipping = () => (dispatch, getState) => {\n  dispatch({ type: REMOVE_SELECTED_SHIPPING });\n  updateLocalStorage(getState().checkout.selectedshipping, 'selectedshipping');\n};\n\nexport const removeSelectedPayment = () => (dispatch, getState) => {\n  dispatch({ type: REMOVE_SELECTED_PAYMENT });\n  updateLocalStorage(getState().checkout.selectedpayment, 'selectedpayment');\n};\n"]},"metadata":{},"sourceType":"module"}